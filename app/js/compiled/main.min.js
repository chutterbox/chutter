(function(){"use strict";var app;app=angular.module("MainApp",["Chutter"]);$(document).ready(function(){return setTimeout(function(){return $("menu-toggle > a").on("click",function(event){console.log(event);if(event.screenX<53){return event.preventDefault()}})},2e3)});app.config(["$httpProvider","$mdThemingProvider",function($httpProvider,$mdThemingProvider){$mdThemingProvider.theme("default").primaryPalette("light-blue");$mdThemingProvider.theme("moderator").primaryPalette("indigo");return $httpProvider.interceptors.push(["$q","$injector","$rootScope",function($q,$injector,$rootScope){return{responseError:function(rejection){if(rejection.status===401){return $rootScope.$broadcast("auth:show-signin")}}}}])}])}).call(this);(function(){"use strict";var app;app=angular.module("MainApp");app.controller("authCtrl",["$rootScope","$scope","$state","$stateParams","$auth","$mdDialog",function($rootScope,$scope,$state,$stateParams,$auth,$mdDialog){$scope.submitLogin=function(user){user.remember_me=true;return $auth.submitLogin(user)};$scope.submitRegistration=function(user){return $auth.submitRegistration(user)};$rootScope.$on("auth:login-success",function(){return $mdDialog.hide()});$scope.hideDialog=function(){return $mdDialog.hide()};$scope.$on("auth:registration-email-error",function(ev,reason){$scope.errors=_.uniq(reason.errors.full_messages);return setTimeout(function(){return $scope.errors=[]},5e3)});$scope.$on("auth:login-error",function(ev,reason){console.log(reason);$scope.errors=_.uniq(reason.errors);return setTimeout(function(){return $scope.errors=[]},5e3)});return $scope.$on("auth:registration-email-success",function(ev,user){return $auth.validateUser()})}])}).call(this);(function(){var app;app=angular.module("MainApp");app.controller("commentsCtrl",["$scope","Comments","Post","Page","$mdBottomSheet","CommentResource",function($scope,Comments,Post,Page,$mdBottomSheet,CommentResource){var _x;$scope.page=Page;$scope.page.post=Post;$scope.page.comments=Comments;$scope.resource=CommentResource;$scope.reply=function(comment){return $mdBottomSheet.show({templateUrl:"/partials/main/comments/replyPanel.html",parent:"#comments",controller:"replyCtrl",disableParentScroll:true,locals:{comment:comment}})};return _x=function(STR_XPATH,children){var xnodes,xres,xresult;if(children){STR_XPATH='//div[contains(@data-path, "'+STR_XPATH+'")]'}else{STR_XPATH='//div[@data-path="'+STR_XPATH+'" and contains(@class, "comment")]'}xresult=document.evaluate(STR_XPATH,document,null,XPathResult.ANY_TYPE,null);xnodes=[];xres=void 0;while(xres=xresult.iterateNext()){xnodes.push(xres)}return xnodes}}]);app.controller("replyCtrl",["$scope","Page","CommentResource","$mdBottomSheet","comment",function($scope,Page,CommentResource,$mdBottomSheet,comment){$scope.page=Page;$scope.comment=comment;$scope.newComment={post_id:$scope.page.post.id,parent_id:$scope.comment&&$scope.comment.id?$scope.comment.id:void 0,body:""};return $scope.create=function(){return CommentResource.save({comment:$scope.newComment}).$promise.then(function(comment){$mdBottomSheet.hide();if($scope.comment&&$scope.comment.id){return $scope.comment.children.unshift(comment)}else{return $scope.page.comments.unshift(comment)}})}}])}).call(this);(function(){var app;app=angular.module("MainApp");app.controller("communityEditCtrl",["$scope","$mdDialog","List","Page","CommunityResource",function($scope,$mdDialog,List,Page,CommunityResource){$scope.communities=List;$scope.hideDialog=function(){return $mdDialog.hide()};return $scope.toggle=function(community){if(community.selected){return CommunityResource.subscribe({id:community.slug}).$promise.then(function(data){})}else{return CommunityResource.unsubscribe({id:community.slug}).$promise.then(function(data){})}}}]);app.controller("communityCtrl",["$scope","$state","$rootScope","$stateParams","Page","Posts",function($scope,$state,$rootScope,$stateParams,Page,Posts){$scope.page=Page;return $scope.page.posts=Posts}]);app.controller("communityPanelCtrl",["$scope","$mdBottomSheet","Page",function($scope,$mdBottomSheet,Page){$scope.page=Page;return $scope.close=function(){return $mdBottomSheet.hide()}}])}).call(this);(function(){var app;app=angular.module("MainApp");app.controller("createCtrl",["$scope","CommunityResource","$state","$filter","Page","$mdDialog","CommunityRule",function($scope,CommunityResource,$state,$filter,Page,$mdDialog,CommunityRule){$scope.flowState={selectedNetwork:{},loading:false};$scope.page=Page;$scope.newCommunity={network_id:"",name:"",rules_attributes:[]};$scope.slug=function(){return $scope.newCommunity.name};$scope.$watch("newCommunity.name",_.debounce(function(newVal,oldVal){return $scope.flowState.loading=true},500));$scope.$watch("flowState.selectedNetwork",function(newVal,oldVal){if(newVal&&newVal.id){return $scope.newCommunity.network_id=newVal.id}});$scope.nameValid=function(){if($scope.newCommunity.name&&$scope.newCommunity.name.length>0){return true}else{return false}};$scope.createCommunityRule=function($event){$scope.newRule=new CommunityRule;$scope.newCommunity.rules_attributes.push($scope.newRule);return $mdDialog.show({controller:"createCommunityRuleCtrl",templateUrl:"/partials/shared/createCommunityRule.html",parent:angular.element(document.body),scope:$scope,targetElement:$event,preserveScope:true,clickOutsideToClose:true})};$scope.$on("cancelSave",function(){$scope.newCommunity.rules_attributes.pop();return $scope.newRule.$destroy});$scope.selectedStep=0;$scope.next=function(){return $scope.selectedStep+=1};$scope.back=function(){return $scope.selectedStep-=1};return $scope.submit=function(){return CommunityResource.save({community:$scope.newCommunity}).$promise.then(function(data){return $state.transitionTo("home.community",{community:data.community.slug})})}}])}).call(this);(function(){var app;app=angular.module("MainApp");app.controller("toastCtrl",function(){});app.controller("navCtrl",["$scope","$state","$stateParams","$auth","Page","NetworkSubscriptions","$mdBottomSheet","$mdDialog","$mdSidenav","$mdToast","poller","API",function($scope,$state,$stateParams,$auth,Page,NetworkSubscriptions,$mdBottomSheet,$mdDialog,$mdSidenav,$mdToast,poller,API){var content,element,isOpen,left,right,scrollHandler,toggleOpen;isOpen=void 0;toggleOpen=void 0;$scope.page=Page;element=document.getElementById("main-toolbar");content=document.getElementById("content");left=document.getElementById("scrolly-left");right=document.getElementById("scrolly-right");$("#content").scroll(function(e){return window.requestAnimationFrame(scrollHandler)});scrollHandler=function(){var shift,velocity;velocity=1.4;if(content.scrollTop*velocity<64){shift=content.scrollTop*1.7;element.style.zIndex=21}else{shift=64;element.style.zIndex=24}element.style.transform="translate3d(0px,-"+shift+"px, 0px)";left.style.transform="translate3d(0px,"+(65-shift)+"px, 0px)";left.style.webkitTransform="translate3d(0px,"+(65-shift)+"px, 0px)";right.style.transform="translate3d(0px,"+(65-shift)+"px, 0px)";right.style.webkitTransform="translate3d(0px,"+(65-shift)+"px, 0px)";return element.style.cssText+="-webkit-transform: translate3d(0px,-"+shift+"px, 0px);"};$scope.$on("auth:validation-success",function(){});$scope.$on("auth:login-success",function(){});$mdToast.show({controller:"toastCtrl",templateUrl:"/partials/toasts/comment-toast.html",position:"bottom right"});$scope.$on("auth:show-signin",function(){return $mdDialog.show({controller:"authCtrl",templateUrl:"/partials/main/authenticate.html",parent:angular.element(document.body),clickOutsideToClose:true})});$scope.logout=function(){return $auth.signOut()};$scope.toggleLeft=function(){return $mdSidenav("left").toggle()};$scope.signIn=function(){return $scope.$broadcast("auth:show-signin")};$scope.exploreCommunity=function(community){return $state.transitionTo("home.network.community",{network:$scope.page.network.slug,community:community.slug})};$scope.exploreNetwork=function(network){return $state.transitionTo("home.network",{network:network.slug})};$scope.exploreAll=function(){$scope.page.selectedTab=0;return $state.transitionTo("home.all")};$scope.editNetworks=function(){return $mdDialog.show({controller:"networkEditCtrl",templateUrl:"/partials/main/networkEdit.html",resolve:{List:["NetworkResource",function(NetworkResource){return NetworkResource.list()}]},parent:angular.element(document.body),clickOutsideToClose:true})};$scope.$on("auth:login-success",function(){return $scope.networks=$auth.user.networks});isOpen=function(section){return Page.isSectionSelected(section)};toggleOpen=function(section){return Page.toggleSelectSection(section)};this.isOpen=isOpen;this.toggleOpen=toggleOpen;return this.autoFocusContent=false}])}).call(this);(function(){var app;app=angular.module("MainApp");app.controller("networkCtrl",["$scope","$state","$rootScope","$stateParams","$timeout","Page","Network","Posts",function($scope,$state,$rootScope,$stateParams,$timeout,Page,Network,Posts){$scope.page=Page;return $scope.page.posts=Posts}]);app.controller("networkEditCtrl",["$scope","$mdDialog","List","NetworkResource","Page",function($scope,$mdDialog,List,NetworkResource,Page){$scope.page=Page;$scope.networks=List;$scope.hideDialog=function(){return $mdDialog.hide()};return $scope.toggle=function(network){if(network.selected){return NetworkResource.subscribe({id:network.slug}).$promise.then(function(data){$scope.page.networkSubscriptions.length=0;return $scope.page.networkSubscriptions=data})}else{return NetworkResource.unsubscribe({id:network.slug}).$promise.then(function(data){$scope.page.networkSubscriptions.length=0;return $scope.page.networkSubscriptions=data})}}}])}).call(this);(function(){var app;app=angular.module("MainApp");app.controller("submitCtrl",["$scope","Community","MediaResource","Page",function($scope,Community,MediaResource,Page){$scope.permitted=function(type){if($scope.page.community&&$scope.page.community.permitted_formats_list.indexOf(type)>-1){return true}else{return false}};return $scope.selectPostType=function(type){return $scope.newPost.type=type}}]);app.controller("musicSubmitCtrl",["$scope","MediaResource","ExternalServicesResource","Page","PostResource","$state",function($scope,MediaResource,ExternalServicesResource,Page,PostResource,$state){$scope.page=Page;$scope.newPost={title:"",media_attributes:[{format:"music"}]};$scope.preview={title:"",media:[{}]};$scope.querySearch=function(query){if(query&&query.length>0){return ExternalServicesResource.search({q:query})}};$scope.searchTextChange=function(text){console.log(text)};$scope.submit=function(){$scope.newPost.community_id=$scope.page.community.id;return PostResource.save({post:$scope.newPost}).$promise.then(function(data){return $state.transitionTo("home.community.comments",{id:data.slug,community:$scope.page.community})})};$scope.selectedItemChange=function(){return MediaResource.resolve({link:$scope.selectedItem.link,format:"music"}).$promise.then(function(data){return $scope.updatePreview(data)})};$scope.updatePreview=function(data){$scope.newPost.media_attributes[0]=data;$scope.newPost.title=$scope.selectedItem.title;$scope.preview.title=$scope.selectedItem.title;$scope.scraping=false;if(data){$scope.data=true;return $scope.preview.media[0]=data}};return $scope.loadAll=function(){var allStates;allStates="Alabama, Alaska, Arizona, Arkansas, California, Colorado, Connecticut, Delaware,              Florida, Georgia, Hawaii, Idaho, Illinois, Indiana, Iowa, Kansas, Kentucky, Louisiana,              Maine, Maryland, Massachusetts, Michigan, Minnesota, Mississippi, Missouri, Montana,              Nebraska, Nevada, New Hampshire, New Jersey, New Mexico, New York, North Carolina,              North Dakota, Ohio, Oklahoma, Oregon, Pennsylvania, Rhode Island, South Carolina,              South Dakota, Tennessee, Texas, Utah, Vermont, Virginia, Washington, West Virginia,              Wisconsin, Wyoming";return allStates.split(/, +/g).map(function(state){return{value:state.toLowerCase(),display:state}})}}]);app.controller("imageSubmitCtrl",["$scope","MediaResource","Page","PostResource","$state",function($scope,MediaResource,Page,PostResource,$state){$scope.page=Page;$scope.newPost={title:"",media_attributes:[{format:"image"}]};$scope.preview={title:"",media:[{}]};$scope.$watch("newPost.media_attributes[0].link",function(newVal,oldVal){if(newVal!==oldVal){$scope.scraping=true;return MediaResource.resolve({link:newVal,format:$scope.newPost.media_attributes[0].format}).$promise.then(function(data){return $scope.updatePreview(data)})}});$scope.$watch("newPost.title",function(newVal){return $scope.preview.title=newVal});$scope.submit=function(){$scope.newPost.community_id=$scope.page.community.id;return PostResource.save({post:$scope.newPost}).$promise.then(function(data){return $state.transitionTo("home.community.comments",{id:data.slug,community:$scope.page.community})})};return $scope.updatePreview=function(data){$scope.scraping=false;if(data){$scope.data=true;$scope.newPost.media_attributes[0]=data;return $scope.preview.media[0]=data}}}]);app.controller("webpageSubmitCtrl",["$scope","MediaResource","Page","PostResource","$state",function($scope,MediaResource,Page,PostResource,$state){$scope.page=Page;$scope.newPost={title:"",media_attributes:[{format:"webpage"}]};$scope.preview={title:"",media:[{}]};$scope.$watch("newPost.media_attributes[0].link",function(newVal,oldVal){if(newVal!==oldVal){$scope.scraping=true;return MediaResource.resolve({link:newVal,format:$scope.newPost.media_attributes[0].format}).$promise.then(function(data){return $scope.updatePreview(data)})}});$scope.$watch("newPost.title",function(newVal){return $scope.preview.title=newVal});$scope.submit=function(){$scope.newPost.community_id=$scope.page.community.id;return PostResource.save({post:$scope.newPost}).$promise.then(function(data){return $state.transitionTo("home.community.comments",{id:data.slug,community:$scope.page.community.slug})})};return $scope.updatePreview=function(data){$scope.scraping=false;if(data){$scope.data=true;$scope.newPost.media_attributes[0]=data;return $scope.preview.media[0]=data}}}]);app.controller("discussionSubmitCtrl",["$scope","Page","PostResource","$state",function($scope,Page,PostResource,$state){$scope.page=Page;$scope.newPost={title:""};$scope.preview={title:""};$scope.$watch("newPost.title",function(newVal){return $scope.preview.title=newVal});$scope.submit=function(){$scope.newPost.community_id=$scope.page.community.id;return PostResource.save({post:$scope.newPost}).$promise.then(function(data){return $state.transitionTo("home.community.comments",{id:data.slug,community:$scope.page.community.slug})})};return $scope.updatePreview=function(data){$scope.scraping=false;if(data){$scope.data=true;$scope.newPost.media_attributes[0]=data;return $scope.preview.media[0]=data}}}]);app.controller("videoSubmitCtrl",["$scope","MediaResource","Page","PostResource","$state",function($scope,MediaResource,Page,PostResource,$state){$scope.page=Page;$scope.newPost={title:"",media_attributes:[{format:"video"}]};$scope.preview={title:"",media:[{}]};$scope.$watch("newPost.media_attributes[0].link",function(newVal,oldVal){if(newVal!==oldVal){$scope.scraping=true;return MediaResource.resolve({link:newVal,format:$scope.newPost.media_attributes[0].format}).$promise.then(function(data){return $scope.updatePreview(data)})}});$scope.$watch("newPost.title",function(newVal){return $scope.preview.title=newVal});$scope.submit=function(){$scope.newPost.community_id=$scope.page.community.id;return PostResource.save({post:$scope.newPost}).$promise.then(function(data){return $state.transitionTo("home.community.comments",{id:data.slug,community:$scope.page.community.slug})})};return $scope.updatePreview=function(data){$scope.scraping=false;if(data){$scope.data=true;$scope.newPost.media_attributes[0]=data;return $scope.preview.media[0]=data}}}])}).call(this);(function(){var app;app=angular.module("MainApp");app.directive("commentEmbed",function(){return{templateUrl:"/partials/main/comments/commentEmbed.html"}});app.directive("comment",["$compile","$mdBottomSheet","CommentResource",function($compile,$mdBottomSheet,CommentResource){return{restrict:"E",scope:{comment:"=",parent:"="},link:function($scope,$element){if($scope.comment&&$scope.comment.children.length>0){$compile('<comment class="child" layout="column" ng-repeat="child in comment.children" id="c{{child.path}}" parent="comment" comment="child"></comment>')($scope,function(cloned,scope){return $element.append(cloned)})}$scope.comment.elements={};$scope.comment.element=$element[0];_.each($element[0].children,function(child){return $scope.comment.elements[child.className]=child});$scope.offsetTop=$scope.comment.element.offsetTop;$scope.offsetLeft=$scope.comment.element.offsetLeft;$scope.comment.childIds=_.map($scope.comment.children,function(child){return"c"+child.path});$scope.toggle=function(){if($scope.comment.open){$scope.comment.open=false;return window.requestAnimationFrame(function(){$scope.comment.elements.main.className="main active";$scope.comment.elements.collapsed.className="collapsed active";_.each($scope.comment.childIds,function(id){return document.getElementById(id).className="ng-scope ng-isolate-scope shrunk"});return $scope.comment.element.style.cssText="height: 35px;"})}else{$scope.comment.open=true;return window.requestAnimationFrame(function(){$scope.comment.element.style.cssText="";$scope.comment.elements.main.className="main";$scope.comment.elements.collapsed.className="collapsed";return _.each($scope.comment.childIds,function(id){return document.getElementById(id).className="ng-scope ng-isolate-scope"})})}};$scope.comment.updateVote=function(vote){if($scope.comment.vote===vote){vote=0}$scope.comment.vote=vote;return CommentResource.vote({id:$scope.comment.id,vote:vote})};return $scope.reply=function(){return $mdBottomSheet.show({templateUrl:"/partials/main/comments/replyPanel.html",parent:"#comments",controller:"replyCtrl",locals:{comment:$scope.comment}})}},templateUrl:"/partials/main/comments/comment.html"}}])}).call(this);(function(){var app;app=angular.module("MainApp");app.directive("menuLink",function(){return{scope:{community:"="},templateUrl:"/partials/main/menu/link.html",link:function($scope,$element){var controller;controller=$element.parent().controller();$scope.isSelected=function(){return controller.isSelected($scope.community)};$scope.focusSection=function(){controller.autoFocusContent=true}}}});app.directive("menuToggle",["$timeout","$state",function($timeout,$state){return{scope:{networkSubscription:"="},templateUrl:"/partials/main/menu/toggle.html",controller:["$mdDialog","$scope",function($mdDialog,$scope){return $scope.editCommunity=function(){return $mdDialog.show({controller:"communityEditCtrl",templateUrl:"/partials/main/communityEdit.html",resolve:{List:["NetworkResource",function(NetworkResource){return NetworkResource.communities({id:$scope.networkSubscription.network_id})}]},parent:angular.element(document.body),clickOutsideToClose:true})}}],link:function($scope,$element){var $ul,controller,originalHeight,parentNode;controller=$element.parent().controller();$ul=$element.find("ul");originalHeight=void 0;$scope.isOpen=function(){return controller.isOpen($scope.networkSubscription)};$scope.toggle=function(){controller.toggleOpen($scope.networkSubscription)};$scope.editNetworks=function(){return controller.editNetworks};if($element.find("a").hasClass("active")){$timeout(function(){return $scope.toggle()},100)}$scope.$watch($scope.isOpen,function(open){var getTargetHeight,targetHeight;$ul=$element.find("ul");getTargetHeight=function(){var targetHeight;var targetHeight;targetHeight=void 0;$ul.addClass("no-transition");$ul.css("height","");targetHeight=$ul.prop("clientHeight");$ul.css("height",0);$ul.removeClass("no-transition");return targetHeight};targetHeight=open?getTargetHeight():0;return $timeout(function(){return $ul.css({height:targetHeight+"px"})},0,false)});parentNode=$element[0].parentNode.parentNode.parentNode}}}])}).call(this);(function(){var app;app=angular.module("MainApp");app.directive("imageSubmitForm",function(){return{restrict:"E",templateUrl:"/partials/main/submit/image.html",controller:"imageSubmitCtrl"}});app.directive("musicSubmitForm",function(){return{restrict:"E",templateUrl:"/partials/main/submit/music.html",controller:"musicSubmitCtrl"}});app.directive("videoSubmitForm",function(){return{restrict:"E",templateUrl:"/partials/main/submit/video.html",controller:"videoSubmitCtrl"}});app.directive("discussionSubmitForm",function(){return{restrict:"E",templateUrl:"/partials/main/submit/discussion.html",controller:"discussionSubmitCtrl"}});app.directive("webpageSubmitForm",function(){return{restrict:"E",templateUrl:"/partials/main/submit/webpage.html",controller:"webpageSubmitCtrl"}})}).call(this);(function(){"use strict";var app;app=angular.module("MainApp");app.filter("gtThreshold",function(){return function(input){if(parseInt(input.toString().replace(/,/g,""))>10){return input+" plays"}}});app.filter("tags",function(){return function(input){return input.replace(/@(\S*)/g,"<a href=search?q=$1>@$1</a>")}});app.filter("oneAtATime",function(){return function(input,start){start=+start;return input.slice(start,start+1)}});app.filter("stripEmail",function(){return function(input){var index;index=input.indexOf("@");return input.slice(0,index)}});app.filter("truncate",function(){return function(text,length,end){if(isNaN(length)){length=10}if(end===undefined){end="..."}if(text&&(text.length<=length||text.length-end.length<=length)){return text}else{return String(text).substring(0,length-end.length)+end}}});app.filter("nospace",function(){return function(value){if(!value){return""}else{return value.replace(RegExp(" ","g"),"")}}})}).call(this);(function(){"use strict";var app;app=angular.module("MainApp");app.factory("NetworkSubscriptionResource",["$resource","Page","API",function($resource,Page,API){return $resource(API.makeURL("/network_subscriptions/:id"),{id:"@id"},{query:{isArray:true,interceptor:{response:function(response){Page.networkSubscriptions=response.data;Page.communitySubscriptions=[];_.each(Page.networkSubscriptions,function(networkSubscription){if(networkSubscription.community_subscriptions.length>0){return Page.communitySubscriptions=Page.communitySubscriptions.concat(networkSubscription.community_subscriptions)}});return console.log(Page)}}}})}]);app.factory("UserResource",["$resource","Page","API",function($resource,Page,API){return $resource(API.makeURL("/users/:id"),{id:"@id"})}]);app.factory("ExternalServicesResource",["$resource","Page","API",function($resource,Page,API){return $resource(API.makeURL("/external_services/:id"),{id:"@id"},{search:{url:API.makeURL("/external_services/search_music"),method:"POST",isArray:true}})}]);app.factory("MediaResource",["$resource","Page","API",function($resource,Page,API){return $resource(API.makeURL("/media/:id"),{id:"@id"},{resolve:{url:API.makeURL("/media/resolve"),method:"POST",isArray:false}})}]);app.factory("CommentResource",["$resource","Page","API",function($resource,Page,API){return $resource(API.makeURL("/comments/:id"),{id:"@id"},{vote:{method:"PUT",url:API.makeURL("/comments/:id/vote")}})}]);app.factory("NetworkResource",["$resource","Page","API",function($resource,Page,API){return $resource(API.makeURL("/networks/:id"),{id:"@id"},{show:{method:"GET",url:API.makeURL("/networks/:id"),interceptor:{response:function(response){Page.network=response.data;Page.title={text:Page.network.name,slug:Page.network.slug};return Page.secondary_title=void 0}}},posts:{method:"GET",isArray:true,url:API.makeURL("/networks/:id/posts")},list:{method:"GET",url:API.makeURL("/networks/list"),isArray:true,transformResponse:function(response){var data;data=void 0;data=angular.fromJson(response);_.each(data,function(item){var sub;sub=void 0;sub=_.findWhere(Page.networkSubscriptions,{network_id:item.id});if(sub){item.subscription_id=sub.id;return item.selected=true}else{return item.selected=false}});return data}},communities:{method:"get",url:API.makeURL("/networks/:id/communities"),isArray:true,transformResponse:function(response){var data;data=void 0;data=angular.fromJson(response);_.each(data,function(item){var sub;sub=void 0;sub=_.findWhere(Page.communitySubscriptions,{community_id:item.id});if(sub){console.log(sub);item.subscription_id=sub.id;return item.selected=true}else{return item.selected=false}});return data}},subscribe:{url:API.makeURL("/networks/:id/subscribe"),method:"PUT",isArray:true},unsubscribe:{url:API.makeURL("/networks/:id/unsubscribe"),method:"PUT",isArray:true}})}]);app.factory("audio",["$document",function($document){var audio;audio=void 0;audio=void 0;audio=$document[0].createElement("audio");return audio}]);app.factory("preview",["$document",function($document){var audio;audio=void 0;audio=void 0;audio=$document[0].createElement("audio");return audio}]);app.factory("playerSvc",["$http","$rootScope",function($http,$rootScope){return{incrPlays:function(songId){return $http.post("/incrPlays",{songId:songId})},getSong:function(track){return $http.get("/getSong?track="+track)}}}])}).call(this);(function(){"use strict";var app;app=angular.module("MainApp");app.config(["$stateProvider","$urlRouterProvider",function($stateProvider,$urlRouterProvider){var all,comments,community,create,home,network,submit,view_url;view_url="/partials/main";$urlRouterProvider.when("","/");$urlRouterProvider.when("/u/:username","/u/:username/overview");home={name:"home","abstract":true,templateUrl:view_url+"/layout.html",controller:"navCtrl",resolve:{NetworkSubscriptions:["NetworkSubscriptionResource","$stateParams","$state","$rootScope","$auth",function(NetworkSubscriptionResource,$stateParams,$state,$rootScope,$auth){return NetworkSubscriptionResource.query()}]}};all={name:"home.all",url:"/",templateUrl:view_url+"/posts.html",controller:["$scope","Page",function($scope,Page){return $scope.page=Page}],resolve:{Posts:["PostResource","$stateParams","$state","$rootScope","$auth",function(PostResource,$stateParams,$state,$rootScope,$auth){return PostResource.query({scope:"all"})}]},onEnter:["Page",function(Page){Page.scope="all";return Page.title="All"}]};network={name:"home.network",url:"/n/:network",templateUrl:view_url+"/posts.html",onEnter:["Page",function(Page){return Page.scope="network"}],controller:"networkCtrl",resolve:{Network:["NetworkResource","$stateParams","$state","$rootScope","$auth",function(NetworkResource,$stateParams,$state,$rootScope,$auth){return NetworkResource.show({id:$stateParams.network})}],Posts:["NetworkResource","$stateParams","$state","$rootScope","$auth",function(NetworkResource,$stateParams,$state,$rootScope,$auth){return NetworkResource.posts({id:$stateParams.network})}]}};community={name:"home.community",url:"/c/:community",onEnter:["Page",function(Page){return Page.scope="community"}],resolve:{Community:["CommunityResource","$stateParams",function(CommunityResource,$stateParams){return CommunityResource.show({id:$stateParams.community}).$promise}],Posts:["CommunityResource","$stateParams",function(CommunityResource,$stateParams){return CommunityResource.posts({id:$stateParams.community}).$promise}]},templateUrl:view_url+"/posts.html",controller:"communityCtrl"};submit={name:"home.community.submit",url:"/submit",onEnter:["Page",function(Page){return Page.scope="submit"}],views:{"@home":{templateUrl:view_url+"/submit.html",controller:"submitCtrl"}}};create={name:"create",url:"/create",templateUrl:view_url+"/create/layout.html",controller:"createCtrl",resolve:{NetworkSubscriptions:["NetworkSubscriptionResource","$stateParams","$state","$rootScope","$auth",function(NetworkSubscriptionResource,$stateParams,$state,$rootScope,$auth){return NetworkSubscriptionResource.query()}]}};comments={name:"home.community.comments",url:"/:id",onEnter:["Page",function(Page){return Page.scope="comments"}],resolve:{Post:["PostResource","$stateParams",function(PostResource,$stateParams){return PostResource.get({id:$stateParams.id}).$promise}],Comments:["PostResource","$stateParams",function(PostResource,$stateParams){return PostResource.comments({id:$stateParams.id})}]},views:{"@home":{templateUrl:view_url+"/comments.html",controller:"commentsCtrl"}}};$stateProvider.state(home);$stateProvider.state(all);$stateProvider.state(network);$stateProvider.state(community);$stateProvider.state(submit);$stateProvider.state(create);return $stateProvider.state(comments)}])}).call(this);
//# sourceMappingURL=main.min.js.map