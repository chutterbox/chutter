angular.module("templates-me",[]).run(["$templateCache",function($templateCache){$templateCache.put("../app/partials/me/index.html",'<!DOCTYPE html><html lang=en ng-app=MeApp xmlns:ng=http://angularjs.org><head><base href="/me/"><link rel=icon type=image/png href="favicon.ico"><link rel="shortcut icon" type=image/png href="favicon.ico"><meta name=fragment content="!"><meta charset="utf-8"><meta content="telephone=no" name="format-detection"><meta content="width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no" name="viewport"><meta content=ZYCtjzD0MQsstNXtDL7ZQyRzkj61deTZWYgEeMmCGdY name="google-site-verification"><link href="https://www.chutter.co/" rel="canonical"><link href=/vendor/ionicons/css/ionicons.min.css rel=stylesheet><link href=/vendor/angular-chart.js/dist/angular-chart.css rel=stylesheet><link href=/css/compiled/application.css rel=stylesheet><link href=/css/me.css rel=stylesheet><title>Chutter &mdash;</title></head><body layout=row layout-fill=layout-fill><ui-view layout=column layout-fill=layout-fill></ui-view><script src=/js/compiled/application.min.js></script><script src=/js/compiled/me.min.js></script><script src=//platform.twitter.com/widgets.js></script></body></html>');$templateCache.put("../app/partials/me/layout.html",'<md-content layout=row flex=flex layout-align="end end"><md-toolbar class="md-whiteframe-z1 md-tall" id=main-toolbar><div ng-hide="user &amp;&amp; user.id" layout=row class=md-toolbar-tools><div layout=row class=toolbar-container><img ng-src=(/vendor/mr-chutter.png style="width: 35px; height: 35px"><a ui-sref=home.all flex=flex ng-click=toggleLeft() id=brand>Chutter</a><md-button ng-show="$mdMedia(\'lt-md\')" ng-click=toggleLeft()><i class="fa fa-list"></i></md-button></div><span flex=flex></span><div layout=row layout-align="end end" class=toolbar-container><md-button ng-click=signIn()>Sign In</md-button></div></div><div ng-show="user &amp;&amp; user.id" layout=row flex=100 class=md-toolbar-tools><div layout=row class=toolbar-container><img ng-src=/vendor/mr-chutter.png style="width: 35px; height: 35px" hide-sm="hide-sm"><a ui-sref=home.all flex=flex ng-click=toggleLeft() hide-sm=hide-sm id=brand>Chutter</a><md-button ng-click=toggleLeft() hide-gt-sm=hide-gt-sm class=md-icon-button><i class="fa fa-align-justify fa-fw"></i></md-button></div><span flex=flex></span><div hide-sm=hide-sm hide-md=hide-md layout=row layout-align="end end" class=toolbar-container><md-button ng-if=user.moderator href=/moderation target=_self>moderation</md-button><md-button ng-if=user.manager href=/management target=_self>management</md-button><md-button href=/me/notifications ng-bind=user.username target=_self></md-button><md-button href=/me/conversations target=_self hide-sm=hide-sm><i class="fa fa-envelope-o fa-fw"></i><md-tooltip>Messages</md-tooltip></md-button><md-button ng-click=logout() hide-sm=hide-sm><i class="fa fa-sign-out fa-fw"></i><md-tooltip>Log out</md-tooltip></md-button></div></div><div layout=row class="md-toolbar-tools md-toolbar-tools-bottom"><div layout=row layout-align="center center" class=toolbar-container><span ng-bind=::user.username flex=flex></span><span flex=flex></span></div><span flex=flex></span><div layout=row layout-align="center center" ng-if="$state.current.name.indexOf(\'conversations\') &gt; -1" class=toolbar-container><div layout=row class=nav-list-item><md-button layout=row layout-align="center start"><p>Conversations</p></md-button><md-button layout=row layout-align="center center" ui-sref=home.conversations.compose class="secondary-action md-icon-button"><span aria-controls=compose aria-label="compose message" class=ion-ios-compose></span></md-button></div></div><div layout=row layout-align="center center" ng-if="$state.current.name.indexOf(\'notifications\') &gt; -1" class=toolbar-container><div layout=row class=nav-list-item><md-button layout=row layout-align="center start"><p>Notifications</p></md-button></div></div></div></md-toolbar><md-sidenav md-component-id=left md-is-locked-open="$mdMedia(\'gt-md\')" class=md-sidenav-left><md-content flex=flex role=navigation layout-fill=layout-fill layout=column class=nav-list><div class=nav-list-item><md-button aria-label=Inbox ui-sref=home.notifications ui-sref-active=md-primary layout=row layout-align="center center">Notifications</md-button></div><div class=nav-list-item><md-button aria-label=Inbox ui-sref=home.conversations ui-sref-active=md-primary layout-align="center start">Inbox</md-button></div><div class=nav-list-item><md-button aria-label=Inbox ui-sref=home.submissions ui-sref-active=md-primary layout-align="center start">Submissions</md-button></div><div class=nav-list-item><md-button aria-label=Saved ui-sref=home.saved_posts ui-sref-active=md-primary layout-align="center start">Saved Posts</md-button></div><div class=nav-list-item><md-button aria-label=Preferences ui-sref=home.preferences ui-sref-active=md-primary layout-align="center start">Preferences</md-button></div><div class=nav-list-item><md-button aria-label=Stats ui-sref=home.stats ui-sref-active=md-primary layout-align="center start">Stats</md-button></div></md-content></md-sidenav><md-content flex=flex layout=row class=md-whiteframe-z1 id=content><ui-view layout=column layout-fill=true></ui-view></md-content><md-sidenav md-component-id=right md-is-locked-open="$mdMedia(\'gt-md\')" class=md-sidenav-right><div layout=column ui-view=right-rail></div></md-sidenav></md-content>');$templateCache.put("../app/partials/me/preferences.html","");$templateCache.put("../app/partials/me/saved.html",'<md-toolbar md-scroll-shrink=true layout-align=center layout=column class="md-primary md-hue-2"><div class=md-toolbar-tools><md-tabs flex=flex class="md-primary md-hue-2"><md-tab ui-sref=home.saved_posts.all><md-tab-label>all</md-tab-label></md-tab><md-tab ui-sref="home.saved_posts.filtered({format: \'image\'})"><md-tab-label>image</md-tab-label></md-tab><md-tab ui-sref="home.saved_posts.filtered({format: \'video\'})"><md-tab-label>video</md-tab-label></md-tab><md-tab ui-sref="home.saved_posts.filtered({format: \'music\'})"><md-tab-label>music</md-tab-label></md-tab><md-tab ui-sref="home.saved_posts.filtered({format: \'webpage\'})"><md-tab-label>webpage</md-tab-label></md-tab><md-tab ui-sref="home.saved_posts.filtered({format: \'disucssion\'})"><md-tab-label>discussion</md-tab-label></md-tab></md-tabs></div></md-toolbar><md-content ui-view=posts></md-content>');$templateCache.put("../app/partials/me/stats.html",'<md-toolbar md-scroll-shrink=true layout-align=center layout=column class="md-primary md-hue-2"><div class=md-toolbar-tools>Stats for {{user.username}}</div></md-toolbar><md-content class=primary-content><div layout-margin=true layout=row flex=100><div layout=column flex=true ng-if=submission_distribution class="md-whiteframe-z1 md-padding"><div layout=row layout-align="center space-between"><div flex=90 layout-align="start center" layout=row><h6>Post Distribution</h6></div><md-button flex=10 class=md-icon-button><i class="icon ion-eye"></i><md-tooltip>Make private</md-tooltip></md-button></div><md-divider></md-divider><div layout=row layout-fill=true layout-align="center center" class=md-padding><canvas click=onClick data=submission_distribution.data labels=submission_distribution.labels legend=true class="chart chart-doughnut" id=doughnut></canvas></div></div><div layout=column flex=true ng-if=comment_distribution class="md-whiteframe-z1 md-padding"><div layout=row layout-align="center space-between"><div flex=90 layout-align="start center" layout=row><h6>Comment Distribution</h6></div><md-button flex=10 class=md-icon-button><i class="icon ion-eye"></i><md-tooltip>Make private</md-tooltip></md-button></div><md-divider></md-divider><div layout=row layout-fill=true layout-align="center center" class=md-padding><canvas click=onClick data=comment_distribution.data labels=comment_distribution.labels legend=true class="chart chart-doughnut" id=doughnut></canvas></div></div><div layout=column flex=true ng-if=domain_distribution class="md-whiteframe-z1 md-padding"><div layout=row layout-align="center space-between"><div flex=90 layout-align="start center" layout=row><h6>Domain Distribution</h6></div><md-button flex=10 class=md-icon-button><i class="icon ion-eye"></i><md-tooltip>Make private</md-tooltip></md-button></div><md-divider></md-divider><div layout=row layout-fill=true layout-align="center center" class=md-padding><canvas click=onClick data=domain_distribution.data labels=domain_distribution.labels legend=true class="chart chart-doughnut" id=doughnut></canvas></div></div></div><div layout-margin=true layout=row flex=100><div layout=column flex=true ng-if=point_distribution class="md-whiteframe-z1 md-padding"><div layout=row layout-align="center space-between"><div flex=90 layout-align="start center" layout=row><h6>Point Distribution</h6></div><md-button flex=10 class=md-icon-button><i class="icon ion-eye"></i><md-tooltip>Make private</md-tooltip></md-button></div><md-divider></md-divider><div layout=row layout-fill=true layout-align="center center" class=md-padding><canvas data=point_distribution.data labels=point_distribution.labels class="chart chart-bar" id=bar></canvas></div></div><div layout=column flex=true class="md-whiteframe-z1 md-padding"><div layout=row layout-align="center space-between"><div flex=90 layout-align="start center" layout=row><h6>Submission Distribution</h6></div><md-button flex=10 class=md-icon-button><i class="icon ion-eye"></i><md-tooltip>Make private</md-tooltip></md-button></div><md-divider></md-divider><div layout=row layout-fill=true layout-align="center center" class=md-padding><canvas click=onClick data=data labels=labels class="chart chart-doughnut" id=doughnut></canvas></div></div></div></md-content>');$templateCache.put("../app/partials/me/submissions.html",'<md-toolbar md-scroll-shrink=true layout-align=center layout=column class="md-primary md-hue-2"><div class=md-toolbar-tools><md-tabs flex=flex class="md-primary md-hue-2"><md-tab><md-tab-label><h3>hot</h3></md-tab-label></md-tab><md-tab><md-tab-label><h3>new</h3></md-tab-label></md-tab><md-tab><md-tab-label><h3>top</h3></md-tab-label></md-tab></md-tabs></div></md-toolbar><md-content infinite-scroll=myPagingFunction() infinite-scroll-distance=3><post ng-repeat="post in page.posts track by post.id" post=post post-index=$index layout=row layout-sm=column flex=flex id=post-{{post.id}} class=post></post></md-content>');$templateCache.put("../app/partials/me/conversations/compose.html",'<md-toolbar class=md-hue-2><div class=md-toolbar-tools><div class=toolbar-container>Start a conversation</div><span flex=flex></span></div></md-toolbar><div><div layout=column layout-padding=layout-padding><form ng-submit=submit()><div layout=row><md-input-container flex=flex><label>recipient\'s username</label><input ng-model=newConversation.recipient_username required></md-input-container></div><div layout=row><md-input-container flex=flex><label>Say something nice...</label><textarea ng-model=newConversation.messages_attributes[0].body type=text rows=10></textarea></md-input-container></div><div layout=row><span flex=flex></span><md-button type=submit class="md-raised md-priary">Submit</md-button></div></form></div></div>');$templateCache.put("../app/partials/me/conversations/conversation.html",'<md-toolbar md-scroll-shrink=true class="md-primary md-hue-2"><div class=md-toolbar-tools></div></md-toolbar><div infinite-scroll=myPagingFunction() infinite-scroll-distance=3 id=content><md-content><div ng-repeat="message in conversation" id=conversation><div ng-if=message.other_participant layout=row flex=flex layout-padding=layout-padding><md-button ng-bind=message.username.charAt(0) class="md-fab md-accent md-hue-2"><md-tooltip>{{message.username}}</md-tooltip></md-button><div layout-padding=layout-padding layout=column class="message grey md-whiteframe-z1"><div ng-bind=message.body class=body></div></div></div><div ng-if=!message.other_participant layout=row flex=flex layout-padding=layout-padding layout-align="end start"><div layout-padding=layout-padding layout=column class="message md-whiteframe-z1"><div flex=flex class=body><p ng-bind=message.body></p></div></div><md-button ng-bind=message.username.charAt(0) class="md-fab md-primary"><md-tooltip>{{message.username}}</md-tooltip></md-button></div></div></md-content><div class=md-padding id=reply><form ng-submit=reply() class=reply><md-input-container flex=flex><label>Reply</label><textarea ng-model=replyText type=text></textarea></md-input-container><div layout=row><span flex=flex></span><md-button type=submit class="md-raised md-primary">Send</md-button></div></form></div></div>');$templateCache.put("../app/partials/me/conversations/conversationList.html",'<md-content flex=flex role=navigation layout-fill=layout-fill layout=column class=detailed-list><div ng-repeat="convo in conversations" layout=row class=detailed-list-item><md-button ui-sref="home.conversations.conversation({id: convo.id})" ui-sref-active=md-primary layout=column layout-align="center start"><p ng-bind=::convo.recipient_name></p><span ng-bind="::((convo.lru_message | limitTo: 30) + \'...\')"></span></md-button></div></md-content>');$templateCache.put("../app/partials/me/notifications/commentNotifications.html",'<md-toolbar md-scroll-shrink=true class="md-primary md-hue-2"><div class=md-toolbar-tools><md-tabs class="md-primary md-hue-2"><md-tab label=hot></md-tab><md-tab label=new></md-tab><md-tab><md-tab-label>top</md-tab-label></md-tab></md-tabs></div></md-toolbar><md-content id=comments><comment layout=column ng-repeat="child in page.comments" id=c{{child.path}} comment=child></comment></md-content>');$templateCache.put("../app/partials/me/notifications/notificationList.html",'<md-content flex=flex role=navigation layout-fill=layout-fill layout=column class=detailed-list><div ng-repeat="subscription in page.notificationSubscriptions" ng-switch=subscription.entityable layout=row class=detailed-list-item><md-button ui-sref="home.notifications.{{subscription.entityable}}Notifications({id: subscription.id})" ui-sref-active=md-primary layout=column layout-align="center start"><p ng-bind="::((\'Re: \' + subscription.title | limitTo: 30) + \'...\')"></p><span ng-bind="(subscription.unread_count || 0) + \' unread notifications\' "></span></md-button></div></md-content>');$templateCache.put("../app/partials/me/notifications/postNotifications.html",'<md-toolbar md-scroll-shrink=true class="md-primary md-hue-2"><div class=md-toolbar-tools><md-tabs class="md-primary md-hue-2"><md-tab label=hot></md-tab><md-tab label=new></md-tab><md-tab><md-tab-label>top</md-tab-label></md-tab></md-tabs></div></md-toolbar><md-content infinite-scroll=myPagingFunction() infinite-scroll-distance=3><post post=page.post layout=row class=post></post><md-toolbar layout=row class="md-hue-2 md-whiteframe-z1" id=comment-toolbar><div class=md-toolbar-tools><span flex=5></span><span ng-bind="notifications.length + \' notifications\'"></span><span flex=flex></span><md-button ng-click=reply() class=md-hue-2>leave a comment</md-button><md-button class="md-warn md-icon-button"><i class="fa fa-trash fa-fw"></i></md-button></div></md-toolbar><div ng-repeat="notification in notifications" ng-switch=notification.entityable><comment ng-switch-when=comment layout=column id=c{{child.path}} comment=notification></comment><div ng-switch-when=removed layout=row class=removal-notice><md-button class="md-fab md-warn"><i class="fa fa-ban fa-fw"></i></md-button><div><h3 ng-bind=::></h3></div></div></div></md-content>')}]);(function(){var app;app=angular.module("MeApp",["Chutter","chart.js","templates-me"])}).call(this);(function(){var app;app=angular.module("MeApp");app.controller("dashboardCtrl",["$scope",function($scope){}])}).call(this);(function(){var app;app=angular.module("MeApp");app.controller("homeCtrl",["$scope","$state","Page","$rootScope",function($scope,$state,Page,$rootScope){$scope.page=Page;return $rootScope.$state=$state}])}).call(this);(function(){var app;app=angular.module("MeApp");app.controller("preferencesCtrl",["$scope",function($scope){}])}).call(this);(function(){var app;app=angular.module("MeApp");app.controller("savedCtrl",["$scope","PostResource","Page",function($scope,PostResource,Page){return $scope.page=Page}])}).call(this);(function(){var app;app=angular.module("MeApp");app.controller("statsCtrl",["$scope","Stats",function($scope,Stats){$scope.stats=Stats;console.log(typeof $scope.stats);_.map($scope.stats,function(obj){return _.mapObject(obj,function(value,key){$scope[key]={};$scope[key].labels=_.keys(value);return $scope[key].data=_.values(value)})});$scope.point_distribution.data=[$scope.point_distribution.data];return $scope.onClick=function(points,evt){return console.log(points,evt)}}])}).call(this);(function(){var app;app=angular.module("MeApp");app.controller("submissionsCtrl",["$scope","Page",function($scope,Page){return $scope.page=Page}])}).call(this);(function(){var app;app=angular.module("MeApp");app.controller("conversationContentCtrl",["$stateParams","ConversationResource","$scope","Conversation",function($stateParams,ConversationResource,$scope,Conversation){$scope.conversation=Conversation;return $scope.reply=function(){return ConversationResource.reply({id:$stateParams.id,body:$scope.replyText}).$promise.then(function(){return $scope.conversationState.conversation.push({body:$scope.replyText,username:$scope.user.username,other_participant:false})})}}]);app.controller("conversationListCtrl",["$scope","Conversations","ConversationResource",function($scope,Conversations,ConversationResource){return $scope.conversations=Conversations}]);app.controller("conversationComposeCtrl",["$scope","ConversationResource","$state",function($scope,ConversationResource,$state){$scope.newConversation={recipient_username:"",messages_attributes:[{body:""}]};return $scope.submit=function(){return ConversationResource.save({conversation:$scope.newConversation}).$promise.then(function(data){return $state.transitionTo("home.conversations.conversation",{id:data.id},{reload:true})})}}])}).call(this);(function(){var app;app=angular.module("MeApp");app.controller("notificationListCtrl",["$scope","Page",function($scope,Page){return $scope.page=Page}]);app.controller("notificationsCtrl",["Page","$scope","Notifications",function(Page,$scope,Notifications){$scope.notifications=Notifications;return $scope.page=Page}])}).call(this);(function(){var app;app=angular.module("MeApp");app.directive("notification",function(){return{restrict:"E",scope:{entity:"="},templateUrl:"/partials/me/notifications/notification.html",link:function(scope,element,attrs){scope.entity.element=element[0];scope.entity.offsetTop=scope.entity.element.offsetTop;return scope.open=function(){NotificationView.initialize(scope.entity);return NotificationView.show()}}}})}).call(this);(function(){var ConversationState,app;ConversationState=function(){function ConversationState(){}ConversationState.prototype.conversations=[];ConversationState.prototype.conversation=[];return ConversationState}();app=angular.module("MeApp");app.factory("ConversationState",[function(){return new ConversationState}])}).call(this);(function(){var app;app=angular.module("MeApp");app.factory("UserResource",["$resource","API","Page",function($resource,API,Page){return $resource(API.makeURL("/users/:id"),{id:"@id"},{submissions:{url:API.makeURL("/users/submissions"),isArray:true,interceptor:{response:function(response){return Page.posts=response.data}}},notificationSubscriptions:{url:API.makeURL("/users/notification_subscriptions"),isArray:true,interceptor:{response:function(response){Page.notificationSubscriptions=response.data;return console.log(Page)}}},notifications:{url:API.makeURL("/users/notifications/:id"),isArray:true},stats:{url:API.makeURL("/users/stats"),isArray:true}})}]);app.factory("ConversationResource",["$resource","API",function($resource,API){return $resource(API.makeURL("/conversations/:id"),{id:"@id"},{messages:{url:API.makeURL("/conversations/:id/messages"),isArray:true},reply:{method:"POST",url:API.makeURL("/conversations/:id/reply")}})}])}).call(this);(function(){"use strict";var app;app=angular.module("MeApp");app.config(["$stateProvider","$urlRouterProvider",function($stateProvider,$urlRouterProvider){var commentNotifications,conversationCompose,conversationContent,conversations,dashboard,home,notificationSubscriptions,postNotifications,preferences,saved_posts,saved_posts_all,saved_posts_filtered,stats,submissions,view_url;view_url="../app/partials/me";home={name:"home","abstract":true,templateUrl:view_url+"/layout.html",controller:"homeCtrl"};dashboard={name:"home.dashboard",url:"/",templateUrl:view_url+"/dashboard.html",controller:"dashboardCtrl"};conversations={name:"home.conversations",url:"/conversations",views:{"right-rail":{templateUrl:view_url+"/conversations/conversationList.html",controller:"conversationListCtrl",resolve:{Conversations:["ConversationResource",function(ConversationResource){return ConversationResource.query()}]}}}};conversationCompose={name:"home.conversations.compose",url:"/compose",views:{"@home":{templateUrl:view_url+"/conversations/compose.html",controller:"conversationComposeCtrl"}}};conversationContent={name:"home.conversations.conversation",url:"/:id",views:{"@home":{templateUrl:view_url+"/conversations/conversation.html",controller:"conversationContentCtrl",resolve:{Conversation:["ConversationResource","$stateParams",function(ConversationResource,$stateParams){return ConversationResource.messages({id:$stateParams.id})}]}}}};notificationSubscriptions={name:"home.notifications",url:"/notifications",views:{"right-rail":{templateUrl:view_url+"/notifications/notificationList.html",controller:"notificationListCtrl",resolve:{Subscriptions:["UserResource",function(UserResource){return UserResource.notificationSubscriptions().$promise}]}}}};postNotifications={name:"home.notifications.postNotifications",url:"/post/:id",views:{"@home":{templateUrl:view_url+"/notifications/postNotifications.html",controller:"notificationsCtrl",resolve:{Post:["Page","PostResource","$stateParams",function(Page,PostResource,$stateParams){return PostResource.get({id:$stateParams.id}).$promise}],Notifications:["Page","PostResource","$stateParams",function(Page,PostResource,$stateParams){return PostResource.notifications({id:$stateParams.id}).$promise}]}}}};commentNotifications={name:"home.notifications.commentNotifications",url:"/comment/:id",views:{"@home":{templateUrl:view_url+"/notifications/commentNotifications.html",controller:"notificationsCtrl",resolve:{Notifications:["Page","CommentResource","$stateParams",function(Page,CommentResource,$stateParams){return CommentResource.notifications({id:$stateParams.id}).$promise}]}}}};saved_posts={name:"home.saved_posts",url:"/saved/posts/",templateUrl:view_url+"/saved.html"};saved_posts_filtered={name:"home.saved_posts.filtered",url:":format",views:{posts:{controller:"savedCtrl",template:'<post ng-repeat="post in page.posts track by post.id" post="post" post-index="$index" layout="row" layout-sm="column" flex="flex" id="post-{{post.id}}" class="post"></post></md-content>',resolve:{Posts:["PostResource","$stateParams",function(PostResource,$stateParams){return PostResource.saved({format:$stateParams.format}).$promise}]}}}};saved_posts_all={name:"home.saved_posts.all",url:"^/saved/posts",views:{posts:{controller:"savedCtrl",template:'<post ng-repeat="post in page.posts track by post.id" post="post" post-index="$index" layout="row" layout-sm="column" flex="flex" id="post-{{post.id}}" class="post"></post></md-content>',resolve:{Posts:["PostResource","$stateParams",function(PostResource,$stateParams){return PostResource.saved({format:$stateParams.format}).$promise}]}}}};preferences={name:"home.preferences",url:"/preferences",templateUrl:view_url+"/preferences.html",controller:"preferencesCtrl"};submissions={name:"home.submissions",url:"/submissions",resolve:{Posts:["UserResource",function(UserResource){return UserResource.submissions().$promise}]},views:{"@home":{templateUrl:view_url+"/submissions.html",controller:"submissionsCtrl"}}};stats={name:"home.stats",url:"/stats",templateUrl:view_url+"/stats.html",resolve:{Stats:["UserResource",function(UserResource){return UserResource.stats().$promise}]},controller:"statsCtrl"};$stateProvider.state(home);$stateProvider.state(dashboard);$stateProvider.state(conversations);$stateProvider.state(conversationCompose);$stateProvider.state(conversationContent);$stateProvider.state(notificationSubscriptions);$stateProvider.state(postNotifications);$stateProvider.state(commentNotifications);$stateProvider.state(saved_posts);$stateProvider.state(saved_posts_filtered);$stateProvider.state(saved_posts_all);$stateProvider.state(stats);return $stateProvider.state(submissions)}])}).call(this);(function(){"use strict";var root=this,previous=root.Chart;var Chart=function(context){var chart=this;this.canvas=context.canvas;this.ctx=context;var computeDimension=function(element,dimension){if(element["offset"+dimension]){return element["offset"+dimension]}else{return document.defaultView.getComputedStyle(element).getPropertyValue(dimension)}};var width=this.width=computeDimension(context.canvas,"Width");var height=this.height=computeDimension(context.canvas,"Height");context.canvas.width=width;context.canvas.height=height;var width=this.width=context.canvas.width;var height=this.height=context.canvas.height;this.aspectRatio=this.width/this.height;helpers.retinaScale(this);return this};Chart.defaults={global:{animation:true,animationSteps:60,animationEasing:"easeOutQuart",showScale:true,scaleOverride:false,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:true,scaleLabel:"<%=value%>",scaleIntegersOnly:true,scaleBeginAtZero:false,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:false,maintainAspectRatio:true,showTooltips:true,customTooltips:false,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}};Chart.types={};var helpers=Chart.helpers={};var each=helpers.each=function(loopable,callback,self){var additionalArgs=Array.prototype.slice.call(arguments,3);if(loopable){if(loopable.length===+loopable.length){var i;for(i=0;i<loopable.length;i++){callback.apply(self,[loopable[i],i].concat(additionalArgs))}}else{for(var item in loopable){callback.apply(self,[loopable[item],item].concat(additionalArgs))}}}},clone=helpers.clone=function(obj){var objClone={};each(obj,function(value,key){if(obj.hasOwnProperty(key))objClone[key]=value});return objClone},extend=helpers.extend=function(base){each(Array.prototype.slice.call(arguments,1),function(extensionObject){each(extensionObject,function(value,key){if(extensionObject.hasOwnProperty(key))base[key]=value})});return base},merge=helpers.merge=function(base,master){var args=Array.prototype.slice.call(arguments,0);args.unshift({});return extend.apply(null,args)},indexOf=helpers.indexOf=function(arrayToSearch,item){if(Array.prototype.indexOf){return arrayToSearch.indexOf(item)}else{for(var i=0;i<arrayToSearch.length;i++){if(arrayToSearch[i]===item)return i}return-1}},where=helpers.where=function(collection,filterCallback){var filtered=[];helpers.each(collection,function(item){if(filterCallback(item)){filtered.push(item)}});return filtered},findNextWhere=helpers.findNextWhere=function(arrayToSearch,filterCallback,startIndex){if(!startIndex){startIndex=-1}for(var i=startIndex+1;i<arrayToSearch.length;i++){var currentItem=arrayToSearch[i];if(filterCallback(currentItem)){return currentItem}}},findPreviousWhere=helpers.findPreviousWhere=function(arrayToSearch,filterCallback,startIndex){if(!startIndex){startIndex=arrayToSearch.length}for(var i=startIndex-1;i>=0;i--){var currentItem=arrayToSearch[i];if(filterCallback(currentItem)){return currentItem}}},inherits=helpers.inherits=function(extensions){var parent=this;var ChartElement=extensions&&extensions.hasOwnProperty("constructor")?extensions.constructor:function(){return parent.apply(this,arguments)};var Surrogate=function(){this.constructor=ChartElement};Surrogate.prototype=parent.prototype;ChartElement.prototype=new Surrogate;ChartElement.extend=inherits;if(extensions)extend(ChartElement.prototype,extensions);ChartElement.__super__=parent.prototype;return ChartElement},noop=helpers.noop=function(){},uid=helpers.uid=function(){var id=0;return function(){return"chart-"+id++}}(),warn=helpers.warn=function(str){if(window.console&&typeof window.console.warn=="function")console.warn(str)},amd=helpers.amd=typeof define=="function"&&define.amd,isNumber=helpers.isNumber=function(n){return!isNaN(parseFloat(n))&&isFinite(n)},max=helpers.max=function(array){return Math.max.apply(Math,array)},min=helpers.min=function(array){return Math.min.apply(Math,array)},cap=helpers.cap=function(valueToCap,maxValue,minValue){if(isNumber(maxValue)){if(valueToCap>maxValue){return maxValue}}else if(isNumber(minValue)){if(valueToCap<minValue){return minValue}}return valueToCap},getDecimalPlaces=helpers.getDecimalPlaces=function(num){if(num%1!==0&&isNumber(num)){return num.toString().split(".")[1].length}else{return 0}},toRadians=helpers.radians=function(degrees){return degrees*(Math.PI/180)},getAngleFromPoint=helpers.getAngleFromPoint=function(centrePoint,anglePoint){var distanceFromXCenter=anglePoint.x-centrePoint.x,distanceFromYCenter=anglePoint.y-centrePoint.y,radialDistanceFromCenter=Math.sqrt(distanceFromXCenter*distanceFromXCenter+distanceFromYCenter*distanceFromYCenter);var angle=Math.PI*2+Math.atan2(distanceFromYCenter,distanceFromXCenter);if(distanceFromXCenter<0&&distanceFromYCenter<0){angle+=Math.PI*2}return{angle:angle,distance:radialDistanceFromCenter}},aliasPixel=helpers.aliasPixel=function(pixelWidth){return pixelWidth%2===0?0:.5},splineCurve=helpers.splineCurve=function(FirstPoint,MiddlePoint,AfterPoint,t){var d01=Math.sqrt(Math.pow(MiddlePoint.x-FirstPoint.x,2)+Math.pow(MiddlePoint.y-FirstPoint.y,2)),d12=Math.sqrt(Math.pow(AfterPoint.x-MiddlePoint.x,2)+Math.pow(AfterPoint.y-MiddlePoint.y,2)),fa=t*d01/(d01+d12),fb=t*d12/(d01+d12);return{inner:{x:MiddlePoint.x-fa*(AfterPoint.x-FirstPoint.x),y:MiddlePoint.y-fa*(AfterPoint.y-FirstPoint.y)},outer:{x:MiddlePoint.x+fb*(AfterPoint.x-FirstPoint.x),y:MiddlePoint.y+fb*(AfterPoint.y-FirstPoint.y)}}},calculateOrderOfMagnitude=helpers.calculateOrderOfMagnitude=function(val){return Math.floor(Math.log(val)/Math.LN10)},calculateScaleRange=helpers.calculateScaleRange=function(valuesArray,drawingSize,textSize,startFromZero,integersOnly){var minSteps=2,maxSteps=Math.floor(drawingSize/(textSize*1.5)),skipFitting=minSteps>=maxSteps;var maxValue=max(valuesArray),minValue=min(valuesArray);if(maxValue===minValue){maxValue+=.5;if(minValue>=.5&&!startFromZero){minValue-=.5}else{maxValue+=.5}}var valueRange=Math.abs(maxValue-minValue),rangeOrderOfMagnitude=calculateOrderOfMagnitude(valueRange),graphMax=Math.ceil(maxValue/(1*Math.pow(10,rangeOrderOfMagnitude)))*Math.pow(10,rangeOrderOfMagnitude),graphMin=startFromZero?0:Math.floor(minValue/(1*Math.pow(10,rangeOrderOfMagnitude)))*Math.pow(10,rangeOrderOfMagnitude),graphRange=graphMax-graphMin,stepValue=Math.pow(10,rangeOrderOfMagnitude),numberOfSteps=Math.round(graphRange/stepValue);
while((numberOfSteps>maxSteps||numberOfSteps*2<maxSteps)&&!skipFitting){if(numberOfSteps>maxSteps){stepValue*=2;numberOfSteps=Math.round(graphRange/stepValue);if(numberOfSteps%1!==0){skipFitting=true}}else{if(integersOnly&&rangeOrderOfMagnitude>=0){if(stepValue/2%1===0){stepValue/=2;numberOfSteps=Math.round(graphRange/stepValue)}else{break}}else{stepValue/=2;numberOfSteps=Math.round(graphRange/stepValue)}}}if(skipFitting){numberOfSteps=minSteps;stepValue=graphRange/numberOfSteps}return{steps:numberOfSteps,stepValue:stepValue,min:graphMin,max:graphMin+numberOfSteps*stepValue}},template=helpers.template=function(templateString,valuesObject){if(templateString instanceof Function){return templateString(valuesObject)}var cache={};function tmpl(str,data){var fn=!/\W/.test(str)?cache[str]=cache[str]:new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};"+"with(obj){p.push('"+str.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return data?fn(data):fn}return tmpl(templateString,valuesObject)},generateLabels=helpers.generateLabels=function(templateString,numberOfSteps,graphMin,stepValue){var labelsArray=new Array(numberOfSteps);if(labelTemplateString){each(labelsArray,function(val,index){labelsArray[index]=template(templateString,{value:graphMin+stepValue*(index+1)})})}return labelsArray},easingEffects=helpers.easingEffects={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){if((t/=1/2)<1)return 1/2*t*t;return-1/2*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){if((t/=1/2)<1)return 1/2*t*t*t;return 1/2*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){if((t/=1/2)<1)return 1/2*t*t*t*t;return-1/2*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){if((t/=1/2)<1)return 1/2*t*t*t*t*t;return 1/2*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-1/2*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return t===0?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return t===1?1:1*(-Math.pow(2,-10*t/1)+1)},easeInOutExpo:function(t){if(t===0)return 0;if(t===1)return 1;if((t/=1/2)<1)return 1/2*Math.pow(2,10*(t-1));return 1/2*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){if(t>=1)return t;return-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){if((t/=1/2)<1)return-1/2*(Math.sqrt(1-t*t)-1);return 1/2*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var s=1.70158;var p=0;var a=1;if(t===0)return 0;if((t/=1)==1)return 1;if(!p)p=1*.3;if(a<Math.abs(1)){a=1;s=p/4}else s=p/(2*Math.PI)*Math.asin(1/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*1-s)*(2*Math.PI)/p))},easeOutElastic:function(t){var s=1.70158;var p=0;var a=1;if(t===0)return 0;if((t/=1)==1)return 1;if(!p)p=1*.3;if(a<Math.abs(1)){a=1;s=p/4}else s=p/(2*Math.PI)*Math.asin(1/a);return a*Math.pow(2,-10*t)*Math.sin((t*1-s)*(2*Math.PI)/p)+1},easeInOutElastic:function(t){var s=1.70158;var p=0;var a=1;if(t===0)return 0;if((t/=1/2)==2)return 1;if(!p)p=1*(.3*1.5);if(a<Math.abs(1)){a=1;s=p/4}else s=p/(2*Math.PI)*Math.asin(1/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*1-s)*(2*Math.PI)/p));return a*Math.pow(2,-10*(t-=1))*Math.sin((t*1-s)*(2*Math.PI)/p)*.5+1},easeInBack:function(t){var s=1.70158;return 1*(t/=1)*t*((s+1)*t-s)},easeOutBack:function(t){var s=1.70158;return 1*((t=t/1-1)*t*((s+1)*t+s)+1)},easeInOutBack:function(t){var s=1.70158;if((t/=1/2)<1)return 1/2*(t*t*(((s*=1.525)+1)*t-s));return 1/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)},easeInBounce:function(t){return 1-easingEffects.easeOutBounce(1-t)},easeOutBounce:function(t){if((t/=1)<1/2.75){return 1*(7.5625*t*t)}else if(t<2/2.75){return 1*(7.5625*(t-=1.5/2.75)*t+.75)}else if(t<2.5/2.75){return 1*(7.5625*(t-=2.25/2.75)*t+.9375)}else{return 1*(7.5625*(t-=2.625/2.75)*t+.984375)}},easeInOutBounce:function(t){if(t<1/2)return easingEffects.easeInBounce(t*2)*.5;return easingEffects.easeOutBounce(t*2-1)*.5+1*.5}},requestAnimFrame=helpers.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){return window.setTimeout(callback,1e3/60)}}(),cancelAnimFrame=helpers.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(callback){return window.clearTimeout(callback,1e3/60)}}(),animationLoop=helpers.animationLoop=function(callback,totalSteps,easingString,onProgress,onComplete,chartInstance){var currentStep=0,easingFunction=easingEffects[easingString]||easingEffects.linear;var animationFrame=function(){currentStep++;var stepDecimal=currentStep/totalSteps;var easeDecimal=easingFunction(stepDecimal);callback.call(chartInstance,easeDecimal,stepDecimal,currentStep);onProgress.call(chartInstance,easeDecimal,stepDecimal);if(currentStep<totalSteps){chartInstance.animationFrame=requestAnimFrame(animationFrame)}else{onComplete.apply(chartInstance)}};requestAnimFrame(animationFrame)},getRelativePosition=helpers.getRelativePosition=function(evt){var mouseX,mouseY;var e=evt.originalEvent||evt,canvas=evt.currentTarget||evt.srcElement,boundingRect=canvas.getBoundingClientRect();if(e.touches){mouseX=e.touches[0].clientX-boundingRect.left;mouseY=e.touches[0].clientY-boundingRect.top}else{mouseX=e.clientX-boundingRect.left;mouseY=e.clientY-boundingRect.top}return{x:mouseX,y:mouseY}},addEvent=helpers.addEvent=function(node,eventType,method){if(node.addEventListener){node.addEventListener(eventType,method)}else if(node.attachEvent){node.attachEvent("on"+eventType,method)}else{node["on"+eventType]=method}},removeEvent=helpers.removeEvent=function(node,eventType,handler){if(node.removeEventListener){node.removeEventListener(eventType,handler,false)}else if(node.detachEvent){node.detachEvent("on"+eventType,handler)}else{node["on"+eventType]=noop}},bindEvents=helpers.bindEvents=function(chartInstance,arrayOfEvents,handler){if(!chartInstance.events)chartInstance.events={};each(arrayOfEvents,function(eventName){chartInstance.events[eventName]=function(){handler.apply(chartInstance,arguments)};addEvent(chartInstance.chart.canvas,eventName,chartInstance.events[eventName])})},unbindEvents=helpers.unbindEvents=function(chartInstance,arrayOfEvents){each(arrayOfEvents,function(handler,eventName){removeEvent(chartInstance.chart.canvas,eventName,handler)})},getMaximumWidth=helpers.getMaximumWidth=function(domNode){var container=domNode.parentNode;return container.clientWidth},getMaximumHeight=helpers.getMaximumHeight=function(domNode){var container=domNode.parentNode;return container.clientHeight},getMaximumSize=helpers.getMaximumSize=helpers.getMaximumWidth,retinaScale=helpers.retinaScale=function(chart){var ctx=chart.ctx,width=chart.canvas.width,height=chart.canvas.height;if(window.devicePixelRatio){ctx.canvas.style.width=width+"px";ctx.canvas.style.height=height+"px";ctx.canvas.height=height*window.devicePixelRatio;ctx.canvas.width=width*window.devicePixelRatio;ctx.scale(window.devicePixelRatio,window.devicePixelRatio)}},clear=helpers.clear=function(chart){chart.ctx.clearRect(0,0,chart.width,chart.height)},fontString=helpers.fontString=function(pixelSize,fontStyle,fontFamily){return fontStyle+" "+pixelSize+"px "+fontFamily},longestText=helpers.longestText=function(ctx,font,arrayOfStrings){ctx.font=font;var longest=0;each(arrayOfStrings,function(string){var textWidth=ctx.measureText(string).width;longest=textWidth>longest?textWidth:longest});return longest},drawRoundedRectangle=helpers.drawRoundedRectangle=function(ctx,x,y,width,height,radius){ctx.beginPath();ctx.moveTo(x+radius,y);ctx.lineTo(x+width-radius,y);ctx.quadraticCurveTo(x+width,y,x+width,y+radius);ctx.lineTo(x+width,y+height-radius);ctx.quadraticCurveTo(x+width,y+height,x+width-radius,y+height);ctx.lineTo(x+radius,y+height);ctx.quadraticCurveTo(x,y+height,x,y+height-radius);ctx.lineTo(x,y+radius);ctx.quadraticCurveTo(x,y,x+radius,y);ctx.closePath()};Chart.instances={};Chart.Type=function(data,options,chart){this.options=options;this.chart=chart;this.id=uid();Chart.instances[this.id]=this;if(options.responsive){this.resize()}this.initialize.call(this,data)};extend(Chart.Type.prototype,{initialize:function(){return this},clear:function(){clear(this.chart);return this},stop:function(){cancelAnimFrame(this.animationFrame);return this},resize:function(callback){this.stop();var canvas=this.chart.canvas,newWidth=getMaximumWidth(this.chart.canvas),newHeight=this.options.maintainAspectRatio?newWidth/this.chart.aspectRatio:getMaximumHeight(this.chart.canvas);canvas.width=this.chart.width=newWidth;canvas.height=this.chart.height=newHeight;retinaScale(this.chart);if(typeof callback==="function"){callback.apply(this,Array.prototype.slice.call(arguments,1))}return this},reflow:noop,render:function(reflow){if(reflow){this.reflow()}if(this.options.animation&&!reflow){helpers.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this)}else{this.draw();this.options.onAnimationComplete.call(this)}return this},generateLegend:function(){return template(this.options.legendTemplate,this)},destroy:function(){this.clear();unbindEvents(this,this.events);var canvas=this.chart.canvas;canvas.width=this.chart.width;canvas.height=this.chart.height;if(canvas.style.removeProperty){canvas.style.removeProperty("width");canvas.style.removeProperty("height")}else{canvas.style.removeAttribute("width");canvas.style.removeAttribute("height")}delete Chart.instances[this.id]},showTooltip:function(ChartElements,forceRedraw){if(typeof this.activeElements==="undefined")this.activeElements=[];var isChanged=function(Elements){var changed=false;if(Elements.length!==this.activeElements.length){changed=true;return changed}each(Elements,function(element,index){if(element!==this.activeElements[index]){changed=true}},this);return changed}.call(this,ChartElements);if(!isChanged&&!forceRedraw){return}else{this.activeElements=ChartElements}this.draw();if(this.options.customTooltips){this.options.customTooltips(false)}if(ChartElements.length>0){if(this.datasets&&this.datasets.length>1){var dataArray,dataIndex;for(var i=this.datasets.length-1;i>=0;i--){dataArray=this.datasets[i].points||this.datasets[i].bars||this.datasets[i].segments;dataIndex=indexOf(dataArray,ChartElements[0]);if(dataIndex!==-1){break}}var tooltipLabels=[],tooltipColors=[],medianPosition=function(index){var Elements=[],dataCollection,xPositions=[],yPositions=[],xMax,yMax,xMin,yMin;helpers.each(this.datasets,function(dataset){dataCollection=dataset.points||dataset.bars||dataset.segments;if(dataCollection[dataIndex]&&dataCollection[dataIndex].hasValue()){Elements.push(dataCollection[dataIndex])}});helpers.each(Elements,function(element){xPositions.push(element.x);yPositions.push(element.y);tooltipLabels.push(helpers.template(this.options.multiTooltipTemplate,element));tooltipColors.push({fill:element._saved.fillColor||element.fillColor,stroke:element._saved.strokeColor||element.strokeColor})},this);yMin=min(yPositions);yMax=max(yPositions);xMin=min(xPositions);xMax=max(xPositions);return{x:xMin>this.chart.width/2?xMin:xMax,y:(yMin+yMax)/2}}.call(this,dataIndex);new Chart.MultiTooltip({x:medianPosition.x,y:medianPosition.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:tooltipLabels,legendColors:tooltipColors,legendColorBackground:this.options.multiTooltipKeyBackground,title:ChartElements[0].label,chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips}).draw()}else{each(ChartElements,function(Element){var tooltipPosition=Element.tooltipPosition();new Chart.Tooltip({x:Math.round(tooltipPosition.x),y:Math.round(tooltipPosition.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:template(this.options.tooltipTemplate,Element),chart:this.chart,custom:this.options.customTooltips}).draw()},this)}}return this},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}});Chart.Type.extend=function(extensions){var parent=this;var ChartType=function(){return parent.apply(this,arguments)};ChartType.prototype=clone(parent.prototype);extend(ChartType.prototype,extensions);ChartType.extend=Chart.Type.extend;if(extensions.name||parent.prototype.name){var chartName=extensions.name||parent.prototype.name;var baseDefaults=Chart.defaults[parent.prototype.name]?clone(Chart.defaults[parent.prototype.name]):{};Chart.defaults[chartName]=extend(baseDefaults,extensions.defaults);Chart.types[chartName]=ChartType;Chart.prototype[chartName]=function(data,options){var config=merge(Chart.defaults.global,Chart.defaults[chartName],options||{});return new ChartType(data,config,this)}}else{warn("Name not provided for this chart, so it hasn't been registered")}return parent};Chart.Element=function(configuration){extend(this,configuration);this.initialize.apply(this,arguments);this.save()};extend(Chart.Element.prototype,{initialize:function(){},restore:function(props){if(!props){extend(this,this._saved)}else{each(props,function(key){this[key]=this._saved[key]},this)}return this},save:function(){this._saved=clone(this);delete this._saved._saved;return this},update:function(newProps){each(newProps,function(value,key){this._saved[key]=this[key];this[key]=value},this);return this},transition:function(props,ease){each(props,function(value,key){this[key]=(value-this._saved[key])*ease+this._saved[key]},this);return this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return isNumber(this.value)}});Chart.Element.extend=inherits;Chart.Point=Chart.Element.extend({display:true,inRange:function(chartX,chartY){var hitDetectionRange=this.hitDetectionRadius+this.radius;return Math.pow(chartX-this.x,2)+Math.pow(chartY-this.y,2)<Math.pow(hitDetectionRange,2)},draw:function(){if(this.display){var ctx=this.ctx;ctx.beginPath();ctx.arc(this.x,this.y,this.radius,0,Math.PI*2);ctx.closePath();ctx.strokeStyle=this.strokeColor;ctx.lineWidth=this.strokeWidth;ctx.fillStyle=this.fillColor;ctx.fill();ctx.stroke()}}});Chart.Arc=Chart.Element.extend({inRange:function(chartX,chartY){var pointRelativePosition=helpers.getAngleFromPoint(this,{x:chartX,y:chartY});var betweenAngles=pointRelativePosition.angle>=this.startAngle&&pointRelativePosition.angle<=this.endAngle,withinRadius=pointRelativePosition.distance>=this.innerRadius&&pointRelativePosition.distance<=this.outerRadius;return betweenAngles&&withinRadius},tooltipPosition:function(){var centreAngle=this.startAngle+(this.endAngle-this.startAngle)/2,rangeFromCentre=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(centreAngle)*rangeFromCentre,y:this.y+Math.sin(centreAngle)*rangeFromCentre}},draw:function(animationPercent){var easingDecimal=animationPercent||1;var ctx=this.ctx;ctx.beginPath();ctx.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle);ctx.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,true);ctx.closePath();ctx.strokeStyle=this.strokeColor;ctx.lineWidth=this.strokeWidth;ctx.fillStyle=this.fillColor;ctx.fill();ctx.lineJoin="bevel";if(this.showStroke){ctx.stroke()}}});Chart.Rectangle=Chart.Element.extend({draw:function(){var ctx=this.ctx,halfWidth=this.width/2,leftX=this.x-halfWidth,rightX=this.x+halfWidth,top=this.base-(this.base-this.y),halfStroke=this.strokeWidth/2;if(this.showStroke){leftX+=halfStroke;rightX-=halfStroke;top+=halfStroke}ctx.beginPath();ctx.fillStyle=this.fillColor;ctx.strokeStyle=this.strokeColor;ctx.lineWidth=this.strokeWidth;ctx.moveTo(leftX,this.base);ctx.lineTo(leftX,top);ctx.lineTo(rightX,top);ctx.lineTo(rightX,this.base);ctx.fill();if(this.showStroke){ctx.stroke()}},height:function(){return this.base-this.y},inRange:function(chartX,chartY){return chartX>=this.x-this.width/2&&chartX<=this.x+this.width/2&&(chartY>=this.y&&chartY<=this.base)}});Chart.Tooltip=Chart.Element.extend({draw:function(){var ctx=this.chart.ctx;ctx.font=fontString(this.fontSize,this.fontStyle,this.fontFamily);this.xAlign="center";this.yAlign="above";var caretPadding=this.caretPadding=2;var tooltipWidth=ctx.measureText(this.text).width+2*this.xPadding,tooltipRectHeight=this.fontSize+2*this.yPadding,tooltipHeight=tooltipRectHeight+this.caretHeight+caretPadding;if(this.x+tooltipWidth/2>this.chart.width){this.xAlign="left"}else if(this.x-tooltipWidth/2<0){this.xAlign="right"}if(this.y-tooltipHeight<0){this.yAlign="below"}var tooltipX=this.x-tooltipWidth/2,tooltipY=this.y-tooltipHeight;ctx.fillStyle=this.fillColor;if(this.custom){this.custom(this)}else{switch(this.yAlign){case"above":ctx.beginPath();ctx.moveTo(this.x,this.y-caretPadding);ctx.lineTo(this.x+this.caretHeight,this.y-(caretPadding+this.caretHeight));ctx.lineTo(this.x-this.caretHeight,this.y-(caretPadding+this.caretHeight));ctx.closePath();ctx.fill();break;case"below":tooltipY=this.y+caretPadding+this.caretHeight;ctx.beginPath();ctx.moveTo(this.x,this.y+caretPadding);ctx.lineTo(this.x+this.caretHeight,this.y+caretPadding+this.caretHeight);ctx.lineTo(this.x-this.caretHeight,this.y+caretPadding+this.caretHeight);ctx.closePath();ctx.fill();break}switch(this.xAlign){case"left":tooltipX=this.x-tooltipWidth+(this.cornerRadius+this.caretHeight);break;case"right":tooltipX=this.x-(this.cornerRadius+this.caretHeight);break}drawRoundedRectangle(ctx,tooltipX,tooltipY,tooltipWidth,tooltipRectHeight,this.cornerRadius);ctx.fill();ctx.fillStyle=this.textColor;ctx.textAlign="center";ctx.textBaseline="middle";ctx.fillText(this.text,tooltipX+tooltipWidth/2,tooltipY+tooltipRectHeight/2)}}});Chart.MultiTooltip=Chart.Element.extend({initialize:function(){this.font=fontString(this.fontSize,this.fontStyle,this.fontFamily);this.titleFont=fontString(this.titleFontSize,this.titleFontStyle,this.titleFontFamily);this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+this.yPadding*2+this.titleFontSize*1.5;this.ctx.font=this.titleFont;var titleWidth=this.ctx.measureText(this.title).width,labelWidth=longestText(this.ctx,this.font,this.labels)+this.fontSize+3,longestTextWidth=max([labelWidth,titleWidth]);this.width=longestTextWidth+this.xPadding*2;var halfHeight=this.height/2;if(this.y-halfHeight<0){this.y=halfHeight}else if(this.y+halfHeight>this.chart.height){this.y=this.chart.height-halfHeight}if(this.x>this.chart.width/2){this.x-=this.xOffset+this.width}else{this.x+=this.xOffset}},getLineHeight:function(index){var baseLineHeight=this.y-this.height/2+this.yPadding,afterTitleIndex=index-1;if(index===0){return baseLineHeight+this.titleFontSize/2}else{return baseLineHeight+(this.fontSize*1.5*afterTitleIndex+this.fontSize/2)+this.titleFontSize*1.5}},draw:function(){if(this.custom){this.custom(this)}else{drawRoundedRectangle(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var ctx=this.ctx;ctx.fillStyle=this.fillColor;ctx.fill();ctx.closePath();ctx.textAlign="left";ctx.textBaseline="middle";ctx.fillStyle=this.titleTextColor;ctx.font=this.titleFont;ctx.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0));ctx.font=this.font;helpers.each(this.labels,function(label,index){ctx.fillStyle=this.textColor;ctx.fillText(label,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(index+1));ctx.fillStyle=this.legendColorBackground;ctx.fillRect(this.x+this.xPadding,this.getLineHeight(index+1)-this.fontSize/2,this.fontSize,this.fontSize);ctx.fillStyle=this.legendColors[index].fill;ctx.fillRect(this.x+this.xPadding,this.getLineHeight(index+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}});Chart.Scale=Chart.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];var stepDecimalPlaces=getDecimalPlaces(this.stepValue);for(var i=0;i<=this.steps;i++){this.yLabels.push(template(this.templateString,{value:(this.min+i*this.stepValue).toFixed(stepDecimalPlaces)}))}this.yLabelWidth=this.display&&this.showLabels?longestText(this.ctx,this.font,this.yLabels):0},addXLabel:function(label){this.xLabels.push(label);this.valuesCount++;this.fit()},removeXLabel:function(){this.xLabels.shift();this.valuesCount--;this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0;this.endPoint=this.display?this.height-this.fontSize*1.5-5:this.height;this.startPoint+=this.padding;this.endPoint-=this.padding;var cachedHeight=this.endPoint-this.startPoint,cachedYLabelWidth;this.calculateYRange(cachedHeight);this.buildYLabels();this.calculateXLabelRotation();while(cachedHeight>this.endPoint-this.startPoint){cachedHeight=this.endPoint-this.startPoint;cachedYLabelWidth=this.yLabelWidth;this.calculateYRange(cachedHeight);this.buildYLabels();if(cachedYLabelWidth<this.yLabelWidth){this.calculateXLabelRotation()}}},calculateXLabelRotation:function(){this.ctx.font=this.font;var firstWidth=this.ctx.measureText(this.xLabels[0]).width,lastWidth=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width,firstRotated,lastRotated;this.xScalePaddingRight=lastWidth/2+3;this.xScalePaddingLeft=firstWidth/2>this.yLabelWidth+10?firstWidth/2:this.yLabelWidth+10;this.xLabelRotation=0;if(this.display){var originalLabelWidth=longestText(this.ctx,this.font,this.xLabels),cosRotation,firstRotatedWidth;this.xLabelWidth=originalLabelWidth;var xGridWidth=Math.floor(this.calculateX(1)-this.calculateX(0))-6;while(this.xLabelWidth>xGridWidth&&this.xLabelRotation===0||this.xLabelWidth>xGridWidth&&this.xLabelRotation<=90&&this.xLabelRotation>0){cosRotation=Math.cos(toRadians(this.xLabelRotation));firstRotated=cosRotation*firstWidth;lastRotated=cosRotation*lastWidth;if(firstRotated+this.fontSize/2>this.yLabelWidth+8){this.xScalePaddingLeft=firstRotated+this.fontSize/2}this.xScalePaddingRight=this.fontSize/2;this.xLabelRotation++;this.xLabelWidth=cosRotation*originalLabelWidth}if(this.xLabelRotation>0){this.endPoint-=Math.sin(toRadians(this.xLabelRotation))*originalLabelWidth+3}}else{this.xLabelWidth=0;this.xScalePaddingRight=this.padding;this.xScalePaddingLeft=this.padding}},calculateYRange:noop,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(value){var scalingFactor=this.drawingArea()/(this.min-this.max);return this.endPoint-scalingFactor*(value-this.min)},calculateX:function(index){var isRotated=this.xLabelRotation>0,innerWidth=this.width-(this.xScalePaddingLeft+this.xScalePaddingRight),valueWidth=innerWidth/Math.max(this.valuesCount-(this.offsetGridLines?0:1),1),valueOffset=valueWidth*index+this.xScalePaddingLeft;if(this.offsetGridLines){valueOffset+=valueWidth/2}return Math.round(valueOffset)},update:function(newProps){helpers.extend(this,newProps);this.fit()},draw:function(){var ctx=this.ctx,yLabelGap=(this.endPoint-this.startPoint)/this.steps,xStart=Math.round(this.xScalePaddingLeft);if(this.display){ctx.fillStyle=this.textColor;ctx.font=this.font;each(this.yLabels,function(labelString,index){var yLabelCenter=this.endPoint-yLabelGap*index,linePositionY=Math.round(yLabelCenter),drawHorizontalLine=this.showHorizontalLines;ctx.textAlign="right";ctx.textBaseline="middle";if(this.showLabels){ctx.fillText(labelString,xStart-10,yLabelCenter)}if(index===0&&!drawHorizontalLine){drawHorizontalLine=true}if(drawHorizontalLine){ctx.beginPath()}if(index>0){ctx.lineWidth=this.gridLineWidth;ctx.strokeStyle=this.gridLineColor}else{ctx.lineWidth=this.lineWidth;ctx.strokeStyle=this.lineColor}linePositionY+=helpers.aliasPixel(ctx.lineWidth);if(drawHorizontalLine){ctx.moveTo(xStart,linePositionY);ctx.lineTo(this.width,linePositionY);ctx.stroke();ctx.closePath()}ctx.lineWidth=this.lineWidth;ctx.strokeStyle=this.lineColor;ctx.beginPath();ctx.moveTo(xStart-5,linePositionY);ctx.lineTo(xStart,linePositionY);ctx.stroke();ctx.closePath()},this);each(this.xLabels,function(label,index){var xPos=this.calculateX(index)+aliasPixel(this.lineWidth),linePos=this.calculateX(index-(this.offsetGridLines?.5:0))+aliasPixel(this.lineWidth),isRotated=this.xLabelRotation>0,drawVerticalLine=this.showVerticalLines;if(index===0&&!drawVerticalLine){drawVerticalLine=true}if(drawVerticalLine){ctx.beginPath()}if(index>0){ctx.lineWidth=this.gridLineWidth;ctx.strokeStyle=this.gridLineColor}else{ctx.lineWidth=this.lineWidth;ctx.strokeStyle=this.lineColor}if(drawVerticalLine){ctx.moveTo(linePos,this.endPoint);ctx.lineTo(linePos,this.startPoint-3);ctx.stroke();ctx.closePath()}ctx.lineWidth=this.lineWidth;ctx.strokeStyle=this.lineColor;ctx.beginPath();ctx.moveTo(linePos,this.endPoint);ctx.lineTo(linePos,this.endPoint+5);ctx.stroke();ctx.closePath();ctx.save();ctx.translate(xPos,isRotated?this.endPoint+12:this.endPoint+8);ctx.rotate(toRadians(this.xLabelRotation)*-1);ctx.font=this.font;ctx.textAlign=isRotated?"right":"center";ctx.textBaseline=isRotated?"middle":"top";ctx.fillText(label,0,0);ctx.restore()},this)}}});Chart.RadialScale=Chart.Element.extend({initialize:function(){this.size=min([this.height,this.width]);this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(value){var scalingFactor=this.drawingArea/(this.max-this.min);return(value-this.min)*scalingFactor},update:function(){if(!this.lineArc){this.setScaleSize()}else{this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2}this.buildYLabels()},buildYLabels:function(){this.yLabels=[];var stepDecimalPlaces=getDecimalPlaces(this.stepValue);for(var i=0;i<=this.steps;i++){this.yLabels.push(template(this.templateString,{value:(this.min+i*this.stepValue).toFixed(stepDecimalPlaces)}))}},getCircumference:function(){return Math.PI*2/this.valuesCount},setScaleSize:function(){var largestPossibleRadius=min([this.height/2-this.pointLabelFontSize-5,this.width/2]),pointPosition,i,textWidth,halfTextWidth,furthestRight=this.width,furthestRightIndex,furthestRightAngle,furthestLeft=0,furthestLeftIndex,furthestLeftAngle,xProtrusionLeft,xProtrusionRight,radiusReductionRight,radiusReductionLeft,maxWidthRadius;this.ctx.font=fontString(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily);for(i=0;i<this.valuesCount;i++){pointPosition=this.getPointPosition(i,largestPossibleRadius);textWidth=this.ctx.measureText(template(this.templateString,{value:this.labels[i]})).width+5;if(i===0||i===this.valuesCount/2){halfTextWidth=textWidth/2;if(pointPosition.x+halfTextWidth>furthestRight){furthestRight=pointPosition.x+halfTextWidth;furthestRightIndex=i}if(pointPosition.x-halfTextWidth<furthestLeft){furthestLeft=pointPosition.x-halfTextWidth;furthestLeftIndex=i}}else if(i<this.valuesCount/2){if(pointPosition.x+textWidth>furthestRight){furthestRight=pointPosition.x+textWidth;furthestRightIndex=i}}else if(i>this.valuesCount/2){if(pointPosition.x-textWidth<furthestLeft){furthestLeft=pointPosition.x-textWidth;furthestLeftIndex=i}}}xProtrusionLeft=furthestLeft;xProtrusionRight=Math.ceil(furthestRight-this.width);furthestRightAngle=this.getIndexAngle(furthestRightIndex);furthestLeftAngle=this.getIndexAngle(furthestLeftIndex);radiusReductionRight=xProtrusionRight/Math.sin(furthestRightAngle+Math.PI/2);radiusReductionLeft=xProtrusionLeft/Math.sin(furthestLeftAngle+Math.PI/2);radiusReductionRight=isNumber(radiusReductionRight)?radiusReductionRight:0;radiusReductionLeft=isNumber(radiusReductionLeft)?radiusReductionLeft:0;this.drawingArea=largestPossibleRadius-(radiusReductionLeft+radiusReductionRight)/2;this.setCenterPoint(radiusReductionLeft,radiusReductionRight)},setCenterPoint:function(leftMovement,rightMovement){var maxRight=this.width-rightMovement-this.drawingArea,maxLeft=leftMovement+this.drawingArea;this.xCenter=(maxLeft+maxRight)/2;this.yCenter=this.height/2},getIndexAngle:function(index){var angleMultiplier=Math.PI*2/this.valuesCount;return index*angleMultiplier-Math.PI/2},getPointPosition:function(index,distanceFromCenter){var thisAngle=this.getIndexAngle(index);return{x:Math.cos(thisAngle)*distanceFromCenter+this.xCenter,y:Math.sin(thisAngle)*distanceFromCenter+this.yCenter}},draw:function(){if(this.display){var ctx=this.ctx;each(this.yLabels,function(label,index){if(index>0){var yCenterOffset=index*(this.drawingArea/this.steps),yHeight=this.yCenter-yCenterOffset,pointPosition;if(this.lineWidth>0){ctx.strokeStyle=this.lineColor;ctx.lineWidth=this.lineWidth;if(this.lineArc){ctx.beginPath();ctx.arc(this.xCenter,this.yCenter,yCenterOffset,0,Math.PI*2);ctx.closePath();ctx.stroke()}else{ctx.beginPath();for(var i=0;i<this.valuesCount;i++){pointPosition=this.getPointPosition(i,this.calculateCenterOffset(this.min+index*this.stepValue));if(i===0){ctx.moveTo(pointPosition.x,pointPosition.y)}else{ctx.lineTo(pointPosition.x,pointPosition.y)}}ctx.closePath();ctx.stroke()}}if(this.showLabels){ctx.font=fontString(this.fontSize,this.fontStyle,this.fontFamily);if(this.showLabelBackdrop){var labelWidth=ctx.measureText(label).width;ctx.fillStyle=this.backdropColor;ctx.fillRect(this.xCenter-labelWidth/2-this.backdropPaddingX,yHeight-this.fontSize/2-this.backdropPaddingY,labelWidth+this.backdropPaddingX*2,this.fontSize+this.backdropPaddingY*2)}ctx.textAlign="center";ctx.textBaseline="middle";ctx.fillStyle=this.fontColor;ctx.fillText(label,this.xCenter,yHeight)}}},this);if(!this.lineArc){ctx.lineWidth=this.angleLineWidth;ctx.strokeStyle=this.angleLineColor;for(var i=this.valuesCount-1;i>=0;i--){if(this.angleLineWidth>0){var outerPosition=this.getPointPosition(i,this.calculateCenterOffset(this.max));ctx.beginPath();ctx.moveTo(this.xCenter,this.yCenter);ctx.lineTo(outerPosition.x,outerPosition.y);ctx.stroke();ctx.closePath()}var pointLabelPosition=this.getPointPosition(i,this.calculateCenterOffset(this.max)+5);ctx.font=fontString(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily);ctx.fillStyle=this.pointLabelFontColor;var labelsCount=this.labels.length,halfLabelsCount=this.labels.length/2,quarterLabelsCount=halfLabelsCount/2,upperHalf=i<quarterLabelsCount||i>labelsCount-quarterLabelsCount,exactQuarter=i===quarterLabelsCount||i===labelsCount-quarterLabelsCount;if(i===0){ctx.textAlign="center"}else if(i===halfLabelsCount){ctx.textAlign="center"}else if(i<halfLabelsCount){ctx.textAlign="left"}else{ctx.textAlign="right"}if(exactQuarter){ctx.textBaseline="middle"}else if(upperHalf){ctx.textBaseline="bottom"}else{ctx.textBaseline="top"}ctx.fillText(this.labels[i],pointLabelPosition.x,pointLabelPosition.y)}}}}});helpers.addEvent(window,"resize",function(){var timeout;return function(){clearTimeout(timeout);timeout=setTimeout(function(){each(Chart.instances,function(instance){if(instance.options.responsive){instance.resize(instance.render,true);
}})},50)}}());if(amd){define(function(){return Chart})}else if(typeof module==="object"&&module.exports){module.exports=Chart}root.Chart=Chart;Chart.noConflict=function(){root.Chart=previous;return Chart}}).call(this);(function(){"use strict";var root=this,Chart=root.Chart,helpers=Chart.helpers;var defaultConfig={scaleBeginAtZero:true,scaleShowGridLines:true,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:true,scaleShowVerticalLines:true,barShowStroke:true,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};Chart.Type.extend({name:"Bar",defaults:defaultConfig,initialize:function(data){var options=this.options;this.ScaleClass=Chart.Scale.extend({offsetGridLines:true,calculateBarX:function(datasetCount,datasetIndex,barIndex){var xWidth=this.calculateBaseWidth(),xAbsolute=this.calculateX(barIndex)-xWidth/2,barWidth=this.calculateBarWidth(datasetCount);return xAbsolute+barWidth*datasetIndex+datasetIndex*options.barDatasetSpacing+barWidth/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*options.barValueSpacing},calculateBarWidth:function(datasetCount){var baseWidth=this.calculateBaseWidth()-(datasetCount-1)*options.barDatasetSpacing;return baseWidth/datasetCount}});this.datasets=[];if(this.options.showTooltips){helpers.bindEvents(this,this.options.tooltipEvents,function(evt){var activeBars=evt.type!=="mouseout"?this.getBarsAtEvent(evt):[];this.eachBars(function(bar){bar.restore(["fillColor","strokeColor"])});helpers.each(activeBars,function(activeBar){activeBar.fillColor=activeBar.highlightFill;activeBar.strokeColor=activeBar.highlightStroke});this.showTooltip(activeBars)})}this.BarClass=Chart.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx});helpers.each(data.datasets,function(dataset,datasetIndex){var datasetObject={label:dataset.label||null,fillColor:dataset.fillColor,strokeColor:dataset.strokeColor,bars:[]};this.datasets.push(datasetObject);helpers.each(dataset.data,function(dataPoint,index){datasetObject.bars.push(new this.BarClass({value:dataPoint,label:data.labels[index],datasetLabel:dataset.label,strokeColor:dataset.strokeColor,fillColor:dataset.fillColor,highlightFill:dataset.highlightFill||dataset.fillColor,highlightStroke:dataset.highlightStroke||dataset.strokeColor}))},this)},this);this.buildScale(data.labels);this.BarClass.prototype.base=this.scale.endPoint;this.eachBars(function(bar,index,datasetIndex){helpers.extend(bar,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,datasetIndex,index),y:this.scale.endPoint});bar.save()},this);this.render()},update:function(){this.scale.update();helpers.each(this.activeElements,function(activeElement){activeElement.restore(["fillColor","strokeColor"])});this.eachBars(function(bar){bar.save()});this.render()},eachBars:function(callback){helpers.each(this.datasets,function(dataset,datasetIndex){helpers.each(dataset.bars,callback,this,datasetIndex)},this)},getBarsAtEvent:function(e){var barsArray=[],eventPosition=helpers.getRelativePosition(e),datasetIterator=function(dataset){barsArray.push(dataset.bars[barIndex])},barIndex;for(var datasetIndex=0;datasetIndex<this.datasets.length;datasetIndex++){for(barIndex=0;barIndex<this.datasets[datasetIndex].bars.length;barIndex++){if(this.datasets[datasetIndex].bars[barIndex].inRange(eventPosition.x,eventPosition.y)){helpers.each(this.datasets,datasetIterator);return barsArray}}}return barsArray},buildScale:function(labels){var self=this;var dataTotal=function(){var values=[];self.eachBars(function(bar){values.push(bar.value)});return values};var scaleOptions={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:labels.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(currentHeight){var updatedRanges=helpers.calculateScaleRange(dataTotal(),currentHeight,this.fontSize,this.beginAtZero,this.integersOnly);helpers.extend(this,updatedRanges)},xLabels:labels,font:helpers.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};if(this.options.scaleOverride){helpers.extend(scaleOptions,{calculateYRange:helpers.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth})}this.scale=new this.ScaleClass(scaleOptions)},addData:function(valuesArray,label){helpers.each(valuesArray,function(value,datasetIndex){this.datasets[datasetIndex].bars.push(new this.BarClass({value:value,label:label,x:this.scale.calculateBarX(this.datasets.length,datasetIndex,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[datasetIndex].strokeColor,fillColor:this.datasets[datasetIndex].fillColor}))},this);this.scale.addXLabel(label);this.update()},removeData:function(){this.scale.removeXLabel();helpers.each(this.datasets,function(dataset){dataset.bars.shift()},this);this.update()},reflow:function(){helpers.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var newScaleProps=helpers.extend({height:this.chart.height,width:this.chart.width});this.scale.update(newScaleProps)},draw:function(ease){var easingDecimal=ease||1;this.clear();var ctx=this.chart.ctx;this.scale.draw(easingDecimal);helpers.each(this.datasets,function(dataset,datasetIndex){helpers.each(dataset.bars,function(bar,index){if(bar.hasValue()){bar.base=this.scale.endPoint;bar.transition({x:this.scale.calculateBarX(this.datasets.length,datasetIndex,index),y:this.scale.calculateY(bar.value),width:this.scale.calculateBarWidth(this.datasets.length)},easingDecimal).draw()}},this)},this)}})}).call(this);(function(){"use strict";var root=this,Chart=root.Chart,helpers=Chart.helpers;var defaultConfig={segmentShowStroke:true,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:true,animateScale:false,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};Chart.Type.extend({name:"Doughnut",defaults:defaultConfig,initialize:function(data){this.segments=[];this.outerRadius=(helpers.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2;this.SegmentArc=Chart.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2});if(this.options.showTooltips){helpers.bindEvents(this,this.options.tooltipEvents,function(evt){var activeSegments=evt.type!=="mouseout"?this.getSegmentsAtEvent(evt):[];helpers.each(this.segments,function(segment){segment.restore(["fillColor"])});helpers.each(activeSegments,function(activeSegment){activeSegment.fillColor=activeSegment.highlightColor});this.showTooltip(activeSegments)})}this.calculateTotal(data);helpers.each(data,function(datapoint,index){this.addData(datapoint,index,true)},this);this.render()},getSegmentsAtEvent:function(e){var segmentsArray=[];var location=helpers.getRelativePosition(e);helpers.each(this.segments,function(segment){if(segment.inRange(location.x,location.y))segmentsArray.push(segment)},this);return segmentsArray},addData:function(segment,atIndex,silent){var index=atIndex||this.segments.length;this.segments.splice(index,0,new this.SegmentArc({value:segment.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:segment.color,highlightColor:segment.highlight||segment.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:Math.PI*1.5,circumference:this.options.animateRotate?0:this.calculateCircumference(segment.value),label:segment.label}));if(!silent){this.reflow();this.update()}},calculateCircumference:function(value){return Math.PI*2*(Math.abs(value)/this.total)},calculateTotal:function(data){this.total=0;helpers.each(data,function(segment){this.total+=Math.abs(segment.value)},this)},update:function(){this.calculateTotal(this.segments);helpers.each(this.activeElements,function(activeElement){activeElement.restore(["fillColor"])});helpers.each(this.segments,function(segment){segment.save()});this.render()},removeData:function(atIndex){var indexToDelete=helpers.isNumber(atIndex)?atIndex:this.segments.length-1;this.segments.splice(indexToDelete,1);this.reflow();this.update()},reflow:function(){helpers.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2});this.outerRadius=(helpers.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2;helpers.each(this.segments,function(segment){segment.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(easeDecimal){var animDecimal=easeDecimal?easeDecimal:1;this.clear();helpers.each(this.segments,function(segment,index){segment.transition({circumference:this.calculateCircumference(segment.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},animDecimal);segment.endAngle=segment.startAngle+segment.circumference;segment.draw();if(index===0){segment.startAngle=Math.PI*1.5}if(index<this.segments.length-1){this.segments[index+1].startAngle=segment.endAngle}},this)}});Chart.types.Doughnut.extend({name:"Pie",defaults:helpers.merge(defaultConfig,{percentageInnerCutout:0})})}).call(this);(function(){"use strict";var root=this,Chart=root.Chart,helpers=Chart.helpers;var defaultConfig={scaleShowGridLines:true,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:true,scaleShowVerticalLines:true,bezierCurve:true,bezierCurveTension:.4,pointDot:true,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:true,datasetStrokeWidth:2,datasetFill:true,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};Chart.Type.extend({name:"Line",defaults:defaultConfig,initialize:function(data){this.PointClass=Chart.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(mouseX){return Math.pow(mouseX-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}});this.datasets=[];if(this.options.showTooltips){helpers.bindEvents(this,this.options.tooltipEvents,function(evt){var activePoints=evt.type!=="mouseout"?this.getPointsAtEvent(evt):[];this.eachPoints(function(point){point.restore(["fillColor","strokeColor"])});helpers.each(activePoints,function(activePoint){activePoint.fillColor=activePoint.highlightFill;activePoint.strokeColor=activePoint.highlightStroke});this.showTooltip(activePoints)})}helpers.each(data.datasets,function(dataset){var datasetObject={label:dataset.label||null,fillColor:dataset.fillColor,strokeColor:dataset.strokeColor,pointColor:dataset.pointColor,pointStrokeColor:dataset.pointStrokeColor,points:[]};this.datasets.push(datasetObject);helpers.each(dataset.data,function(dataPoint,index){datasetObject.points.push(new this.PointClass({value:dataPoint,label:data.labels[index],datasetLabel:dataset.label,strokeColor:dataset.pointStrokeColor,fillColor:dataset.pointColor,highlightFill:dataset.pointHighlightFill||dataset.pointColor,highlightStroke:dataset.pointHighlightStroke||dataset.pointStrokeColor}))},this);this.buildScale(data.labels);this.eachPoints(function(point,index){helpers.extend(point,{x:this.scale.calculateX(index),y:this.scale.endPoint});point.save()},this)},this);this.render()},update:function(){this.scale.update();helpers.each(this.activeElements,function(activeElement){activeElement.restore(["fillColor","strokeColor"])});this.eachPoints(function(point){point.save()});this.render()},eachPoints:function(callback){helpers.each(this.datasets,function(dataset){helpers.each(dataset.points,callback,this)},this)},getPointsAtEvent:function(e){var pointsArray=[],eventPosition=helpers.getRelativePosition(e);helpers.each(this.datasets,function(dataset){helpers.each(dataset.points,function(point){if(point.inRange(eventPosition.x,eventPosition.y))pointsArray.push(point)})},this);return pointsArray},buildScale:function(labels){var self=this;var dataTotal=function(){var values=[];self.eachPoints(function(point){values.push(point.value)});return values};var scaleOptions={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:labels.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(currentHeight){var updatedRanges=helpers.calculateScaleRange(dataTotal(),currentHeight,this.fontSize,this.beginAtZero,this.integersOnly);helpers.extend(this,updatedRanges)},xLabels:labels,font:helpers.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};if(this.options.scaleOverride){helpers.extend(scaleOptions,{calculateYRange:helpers.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth})}this.scale=new Chart.Scale(scaleOptions)},addData:function(valuesArray,label){helpers.each(valuesArray,function(value,datasetIndex){this.datasets[datasetIndex].points.push(new this.PointClass({value:value,label:label,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[datasetIndex].pointStrokeColor,fillColor:this.datasets[datasetIndex].pointColor}))},this);this.scale.addXLabel(label);this.update()},removeData:function(){this.scale.removeXLabel();helpers.each(this.datasets,function(dataset){dataset.points.shift()},this);this.update()},reflow:function(){var newScaleProps=helpers.extend({height:this.chart.height,width:this.chart.width});this.scale.update(newScaleProps)},draw:function(ease){var easingDecimal=ease||1;this.clear();var ctx=this.chart.ctx;var hasValue=function(item){return item.value!==null},nextPoint=function(point,collection,index){return helpers.findNextWhere(collection,hasValue,index)||point},previousPoint=function(point,collection,index){return helpers.findPreviousWhere(collection,hasValue,index)||point};this.scale.draw(easingDecimal);helpers.each(this.datasets,function(dataset){var pointsWithValues=helpers.where(dataset.points,hasValue);helpers.each(dataset.points,function(point,index){if(point.hasValue()){point.transition({y:this.scale.calculateY(point.value),x:this.scale.calculateX(index)},easingDecimal)}},this);if(this.options.bezierCurve){helpers.each(pointsWithValues,function(point,index){var tension=index>0&&index<pointsWithValues.length-1?this.options.bezierCurveTension:0;point.controlPoints=helpers.splineCurve(previousPoint(point,pointsWithValues,index),point,nextPoint(point,pointsWithValues,index),tension);if(point.controlPoints.outer.y>this.scale.endPoint){point.controlPoints.outer.y=this.scale.endPoint}else if(point.controlPoints.outer.y<this.scale.startPoint){point.controlPoints.outer.y=this.scale.startPoint}if(point.controlPoints.inner.y>this.scale.endPoint){point.controlPoints.inner.y=this.scale.endPoint}else if(point.controlPoints.inner.y<this.scale.startPoint){point.controlPoints.inner.y=this.scale.startPoint}},this)}ctx.lineWidth=this.options.datasetStrokeWidth;ctx.strokeStyle=dataset.strokeColor;ctx.beginPath();helpers.each(pointsWithValues,function(point,index){if(index===0){ctx.moveTo(point.x,point.y)}else{if(this.options.bezierCurve){var previous=previousPoint(point,pointsWithValues,index);ctx.bezierCurveTo(previous.controlPoints.outer.x,previous.controlPoints.outer.y,point.controlPoints.inner.x,point.controlPoints.inner.y,point.x,point.y)}else{ctx.lineTo(point.x,point.y)}}},this);ctx.stroke();if(this.options.datasetFill&&pointsWithValues.length>0){ctx.lineTo(pointsWithValues[pointsWithValues.length-1].x,this.scale.endPoint);ctx.lineTo(pointsWithValues[0].x,this.scale.endPoint);ctx.fillStyle=dataset.fillColor;ctx.closePath();ctx.fill()}helpers.each(pointsWithValues,function(point){point.draw()})},this)}})}).call(this);(function(){"use strict";var root=this,Chart=root.Chart,helpers=Chart.helpers;var defaultConfig={scaleShowLabelBackdrop:true,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:true,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:true,segmentShowStroke:true,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:true,animateScale:false,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};Chart.Type.extend({name:"PolarArea",defaults:defaultConfig,initialize:function(data){this.segments=[];this.SegmentArc=Chart.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2});this.scale=new Chart.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:true,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:data.length});this.updateScaleRange(data);this.scale.update();helpers.each(data,function(segment,index){this.addData(segment,index,true)},this);if(this.options.showTooltips){helpers.bindEvents(this,this.options.tooltipEvents,function(evt){var activeSegments=evt.type!=="mouseout"?this.getSegmentsAtEvent(evt):[];helpers.each(this.segments,function(segment){segment.restore(["fillColor"])});helpers.each(activeSegments,function(activeSegment){activeSegment.fillColor=activeSegment.highlightColor});this.showTooltip(activeSegments)})}this.render()},getSegmentsAtEvent:function(e){var segmentsArray=[];var location=helpers.getRelativePosition(e);helpers.each(this.segments,function(segment){if(segment.inRange(location.x,location.y))segmentsArray.push(segment)},this);return segmentsArray},addData:function(segment,atIndex,silent){var index=atIndex||this.segments.length;this.segments.splice(index,0,new this.SegmentArc({fillColor:segment.color,highlightColor:segment.highlight||segment.color,label:segment.label,value:segment.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(segment.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:Math.PI*1.5}));if(!silent){this.reflow();this.update()}},removeData:function(atIndex){var indexToDelete=helpers.isNumber(atIndex)?atIndex:this.segments.length-1;this.segments.splice(indexToDelete,1);this.reflow();this.update()},calculateTotal:function(data){this.total=0;helpers.each(data,function(segment){this.total+=segment.value},this);this.scale.valuesCount=this.segments.length},updateScaleRange:function(datapoints){var valuesArray=[];helpers.each(datapoints,function(segment){valuesArray.push(segment.value)});var scaleSizes=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:helpers.calculateScaleRange(valuesArray,helpers.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);helpers.extend(this.scale,scaleSizes,{size:helpers.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments);helpers.each(this.segments,function(segment){segment.save()});this.reflow();this.render()},reflow:function(){helpers.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2});this.updateScaleRange(this.segments);this.scale.update();helpers.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2});helpers.each(this.segments,function(segment){segment.update({outerRadius:this.scale.calculateCenterOffset(segment.value)})},this)},draw:function(ease){var easingDecimal=ease||1;this.clear();helpers.each(this.segments,function(segment,index){segment.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(segment.value)},easingDecimal);segment.endAngle=segment.startAngle+segment.circumference;if(index===0){segment.startAngle=Math.PI*1.5}if(index<this.segments.length-1){this.segments[index+1].startAngle=segment.endAngle}segment.draw()},this);this.scale.draw()}})}).call(this);(function(){"use strict";var root=this,Chart=root.Chart,helpers=Chart.helpers;Chart.Type.extend({name:"Radar",defaults:{scaleShowLine:true,angleShowLineOut:true,scaleShowLabels:false,scaleBeginAtZero:true,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:true,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:true,datasetStrokeWidth:2,datasetFill:true,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(data){this.PointClass=Chart.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx});this.datasets=[];this.buildScale(data);if(this.options.showTooltips){helpers.bindEvents(this,this.options.tooltipEvents,function(evt){var activePointsCollection=evt.type!=="mouseout"?this.getPointsAtEvent(evt):[];this.eachPoints(function(point){point.restore(["fillColor","strokeColor"])});helpers.each(activePointsCollection,function(activePoint){activePoint.fillColor=activePoint.highlightFill;activePoint.strokeColor=activePoint.highlightStroke});this.showTooltip(activePointsCollection)})}helpers.each(data.datasets,function(dataset){var datasetObject={label:dataset.label||null,fillColor:dataset.fillColor,strokeColor:dataset.strokeColor,pointColor:dataset.pointColor,pointStrokeColor:dataset.pointStrokeColor,points:[]};this.datasets.push(datasetObject);helpers.each(dataset.data,function(dataPoint,index){var pointPosition;if(!this.scale.animation){pointPosition=this.scale.getPointPosition(index,this.scale.calculateCenterOffset(dataPoint))}datasetObject.points.push(new this.PointClass({value:dataPoint,label:data.labels[index],datasetLabel:dataset.label,x:this.options.animation?this.scale.xCenter:pointPosition.x,y:this.options.animation?this.scale.yCenter:pointPosition.y,strokeColor:dataset.pointStrokeColor,fillColor:dataset.pointColor,highlightFill:dataset.pointHighlightFill||dataset.pointColor,highlightStroke:dataset.pointHighlightStroke||dataset.pointStrokeColor}))},this)},this);this.render()},eachPoints:function(callback){helpers.each(this.datasets,function(dataset){helpers.each(dataset.points,callback,this)},this)},getPointsAtEvent:function(evt){var mousePosition=helpers.getRelativePosition(evt),fromCenter=helpers.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},mousePosition);var anglePerIndex=Math.PI*2/this.scale.valuesCount,pointIndex=Math.round((fromCenter.angle-Math.PI*1.5)/anglePerIndex),activePointsCollection=[];if(pointIndex>=this.scale.valuesCount||pointIndex<0){pointIndex=0}if(fromCenter.distance<=this.scale.drawingArea){helpers.each(this.datasets,function(dataset){activePointsCollection.push(dataset.points[pointIndex])})}return activePointsCollection},buildScale:function(data){this.scale=new Chart.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:data.labels,valuesCount:data.datasets[0].data.length});this.scale.setScaleSize();this.updateScaleRange(data.datasets);this.scale.buildYLabels()},updateScaleRange:function(datasets){var valuesArray=function(){var totalDataArray=[];helpers.each(datasets,function(dataset){if(dataset.data){totalDataArray=totalDataArray.concat(dataset.data)}else{helpers.each(dataset.points,function(point){totalDataArray.push(point.value)})}});return totalDataArray}();var scaleSizes=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:helpers.calculateScaleRange(valuesArray,helpers.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);helpers.extend(this.scale,scaleSizes)},addData:function(valuesArray,label){this.scale.valuesCount++;helpers.each(valuesArray,function(value,datasetIndex){var pointPosition=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(value));this.datasets[datasetIndex].points.push(new this.PointClass({value:value,label:label,x:pointPosition.x,y:pointPosition.y,strokeColor:this.datasets[datasetIndex].pointStrokeColor,fillColor:this.datasets[datasetIndex].pointColor}))},this);this.scale.labels.push(label);this.reflow();this.update()},removeData:function(){this.scale.valuesCount--;this.scale.labels.shift();helpers.each(this.datasets,function(dataset){dataset.points.shift()},this);this.reflow();this.update()},update:function(){this.eachPoints(function(point){point.save()});this.reflow();this.render()},reflow:function(){helpers.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:helpers.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2});this.updateScaleRange(this.datasets);this.scale.setScaleSize();this.scale.buildYLabels()},draw:function(ease){var easeDecimal=ease||1,ctx=this.chart.ctx;this.clear();this.scale.draw();helpers.each(this.datasets,function(dataset){helpers.each(dataset.points,function(point,index){if(point.hasValue()){point.transition(this.scale.getPointPosition(index,this.scale.calculateCenterOffset(point.value)),easeDecimal)}},this);ctx.lineWidth=this.options.datasetStrokeWidth;ctx.strokeStyle=dataset.strokeColor;ctx.beginPath();helpers.each(dataset.points,function(point,index){if(index===0){ctx.moveTo(point.x,point.y)}else{ctx.lineTo(point.x,point.y)}},this);ctx.closePath();ctx.stroke();ctx.fillStyle=dataset.fillColor;ctx.fill();helpers.each(dataset.points,function(point){if(point.hasValue()){point.draw()}})},this)}})}).call(this);(function(factory){"use strict";if(typeof define==="function"&&define.amd){define(["angular","chart.js"],factory)}else if(typeof exports==="object"){module.exports=factory(require("angular"),require("chart.js"))}else{factory(angular,Chart)}})(function(angular,Chart){"use strict";Chart.defaults.global.responsive=true;Chart.defaults.global.multiTooltipTemplate="<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%= value %>";Chart.defaults.global.colours=["#97BBCD","#DCDCDC","#F7464A","#46BFBD","#FDB45C","#949FB1","#4D5360"];angular.module("chart.js",[]).provider("ChartJs",ChartJsProvider).factory("ChartJsFactory",["ChartJs",ChartJsFactory]).directive("chartBase",["ChartJsFactory",function(ChartJsFactory){return new ChartJsFactory}]).directive("chartLine",["ChartJsFactory",function(ChartJsFactory){return new ChartJsFactory("Line")}]).directive("chartBar",["ChartJsFactory",function(ChartJsFactory){return new ChartJsFactory("Bar")}]).directive("chartRadar",["ChartJsFactory",function(ChartJsFactory){return new ChartJsFactory("Radar")}]).directive("chartDoughnut",["ChartJsFactory",function(ChartJsFactory){return new ChartJsFactory("Doughnut")}]).directive("chartPie",["ChartJsFactory",function(ChartJsFactory){return new ChartJsFactory("Pie")}]).directive("chartPolarArea",["ChartJsFactory",function(ChartJsFactory){return new ChartJsFactory("PolarArea")}]);function ChartJsProvider(){var options={};var ChartJs={Chart:Chart,getOptions:function(type){var typeOptions=type&&options[type]||{};return angular.extend({},options,typeOptions)}};this.setOptions=function(type,customOptions){if(!customOptions){customOptions=type;options=angular.extend(options,customOptions);return}options[type]=angular.extend(options[type]||{},customOptions);
};this.$get=function(){return ChartJs}}function ChartJsFactory(ChartJs){return function chart(type){return{restrict:"CA",scope:{data:"=",labels:"=",options:"=",series:"=",colours:"=?",getColour:"=?",chartType:"=",legend:"@",click:"=",hover:"="},link:function(scope,elem){var chart,container=document.createElement("div");container.className="chart-container";elem.replaceWith(container);container.appendChild(elem[0]);if(typeof window.G_vmlCanvasManager==="object"&&window.G_vmlCanvasManager!==null){if(typeof window.G_vmlCanvasManager.initElement==="function"){window.G_vmlCanvasManager.initElement(elem[0])}}scope.$watch("data",function(newVal,oldVal){if(!newVal||!newVal.length||Array.isArray(newVal[0])&&!newVal[0].length)return;var chartType=type||scope.chartType;if(!chartType)return;if(chart){if(canUpdateChart(newVal,oldVal))return updateChart(chart,newVal,scope);chart.destroy()}chart=createChart(chartType,scope,elem)},true);scope.$watch("series",resetChart,true);scope.$watch("labels",resetChart,true);scope.$watch("options",resetChart,true);scope.$watch("colours",resetChart,true);scope.$watch("chartType",function(newVal,oldVal){if(isEmpty(newVal))return;if(angular.equals(newVal,oldVal))return;if(chart)chart.destroy();chart=createChart(newVal,scope,elem)});scope.$on("$destroy",function(){if(chart)chart.destroy()});function resetChart(newVal,oldVal){if(isEmpty(newVal))return;if(angular.equals(newVal,oldVal))return;var chartType=type||scope.chartType;if(!chartType)return;if(chart)chart.destroy();chart=createChart(chartType,scope,elem)}}}};function canUpdateChart(newVal,oldVal){if(newVal&&oldVal&&newVal.length&&oldVal.length){return Array.isArray(newVal[0])?newVal.length===oldVal.length&&newVal[0].length===oldVal[0].length:oldVal.reduce(sum,0)>0?newVal.length===oldVal.length:false}return false}function sum(carry,val){return carry+val}function createChart(type,scope,elem){if(!scope.data||!scope.data.length)return;scope.getColour=typeof scope.getColour==="function"?scope.getColour:getRandomColour;scope.colours=getColours(type,scope);var cvs=elem[0],ctx=cvs.getContext("2d");var data=Array.isArray(scope.data[0])?getDataSets(scope.labels,scope.data,scope.series||[],scope.colours):getData(scope.labels,scope.data,scope.colours);var options=angular.extend({},ChartJs.getOptions(type),scope.options);var chart=new ChartJs.Chart(ctx)[type](data,options);scope.$emit("create",chart);["hover","click"].forEach(function(action){if(scope[action])cvs[action==="click"?"onclick":"onmousemove"]=getEventHandler(scope,chart,action)});if(scope.legend&&scope.legend!=="false")setLegend(elem,chart);return chart}function getEventHandler(scope,chart,action){return function(evt){var atEvent=chart.getPointsAtEvent||chart.getBarsAtEvent||chart.getSegmentsAtEvent;if(atEvent){var activePoints=atEvent.call(chart,evt);scope[action](activePoints,evt);scope.$apply()}}}function getColours(type,scope){var colours=angular.copy(scope.colours||ChartJs.getOptions(type).colours||Chart.defaults.global.colours);while(colours.length<scope.data.length){colours.push(scope.getColour())}return colours.map(convertColour)}function convertColour(colour){if(typeof colour==="object"&&colour!==null)return colour;if(typeof colour==="string"&&colour[0]==="#")return getColour(hexToRgb(colour.substr(1)));return getRandomColour()}function getRandomColour(){var colour=[getRandomInt(0,255),getRandomInt(0,255),getRandomInt(0,255)];return getColour(colour)}function getColour(colour){return{fillColor:rgba(colour,.2),strokeColor:rgba(colour,1),pointColor:rgba(colour,1),pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:rgba(colour,.8)}}function getRandomInt(min,max){return Math.floor(Math.random()*(max-min+1))+min}function rgba(colour,alpha){return"rgba("+colour.concat(alpha).join(",")+")"}function hexToRgb(hex){var bigint=parseInt(hex,16),r=bigint>>16&255,g=bigint>>8&255,b=bigint&255;return[r,g,b]}function getDataSets(labels,data,series,colours){return{labels:labels,datasets:data.map(function(item,i){return angular.extend({},colours[i],{label:series[i],data:item})})}}function getData(labels,data,colours){return labels.map(function(label,i){return angular.extend({},colours[i],{label:label,value:data[i],color:colours[i].strokeColor,highlight:colours[i].pointHighlightStroke})})}function setLegend(elem,chart){var $parent=elem.parent(),$oldLegend=$parent.find("chart-legend"),legend="<chart-legend>"+chart.generateLegend()+"</chart-legend>";if($oldLegend.length)$oldLegend.replaceWith(legend);else $parent.append(legend)}function updateChart(chart,values,scope){if(Array.isArray(scope.data[0])){chart.datasets.forEach(function(dataset,i){(dataset.points||dataset.bars).forEach(function(dataItem,j){dataItem.value=values[i][j]})})}else{chart.segments.forEach(function(segment,i){segment.value=values[i]})}chart.update();scope.$emit("update",chart)}function isEmpty(value){return!value||Array.isArray(value)&&!value.length||typeof value==="object"&&!Object.keys(value).length}}});
//# sourceMappingURL=me.min.js.map